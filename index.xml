<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Thomas Labarussias</title><link>https://thomas.labarussias.fr/</link><description>Recent content on Thomas Labarussias</description><generator>Hugo -- gohugo.io</generator><language>fr</language><lastBuildDate>Thu, 17 Jun 2021 00:00:00 +0000</lastBuildDate><atom:link href="https://thomas.labarussias.fr/index.xml" rel="self" type="application/rss+xml"/><item><title>Le FinOps</title><link>https://thomas.labarussias.fr/posts/finops/</link><pubDate>Thu, 17 Jun 2021 00:00:00 +0000</pubDate><guid>https://thomas.labarussias.fr/posts/finops/</guid><description>&lt;h2 id="avant-propos">Avant-propos
&lt;/h2>&lt;p>Durant mon expÃ©rience professionnelle prÃ©cÃ©dente, j&amp;rsquo;ai exercÃ© pendant 3 ans en tant qu&amp;rsquo;expert &lt;strong>FinOps&lt;/strong> sur &lt;strong>AWS&lt;/strong>. La fonction ayant Ã©tÃ© crÃ©Ã©e avec moi, j&amp;rsquo;ai eu toute libertÃ© pour mettre en place le modÃ¨le que je souhaitais, avec sa mÃ©thodologie et ses outils.
Avant d&amp;rsquo;oublier ce que je sais, je me suis dit qu&amp;rsquo;il serait peut-Ãªtre intÃ©ressant pour certains que je mette ce qui me reste en tÃªte par Ã©crit, la littÃ©rature en franÃ§ais se faisant rare d&amp;rsquo;autant plus (si l&amp;rsquo;article plaÃ®t, je ferai peut-Ãªtre une traduction en anglais).&lt;/p>
&lt;p>Il m&amp;rsquo;Ã©tait Ã©galement apparu, en discutant avec mes clients et d&amp;rsquo;autres experts, souvent issus d&amp;rsquo;entreprises de conseils, que ma vision pouvait diffÃ©rer de la leur et de ce qu&amp;rsquo;on trouve gÃ©nÃ©ralement dans les articles traitant du sujet. Je pense que cela vient du fait que je suis avant tout un &lt;em>OPS&lt;/em>, gÃ©rant une production et les contraintes inhÃ©rentes. Mes recommandations et conseils ont toujours eu pour trame de fond une vraie exploitation des plateformes, de leurs performances et disponibilitÃ©s (travaillant pour un infogÃ©rant, si la plateforme tombait, c&amp;rsquo;Ã©taient mes collÃ¨gues et moi qui rÃ©glons les problÃ¨mes, possiblement en astreinte ðŸ˜‰ ).&lt;/p>
&lt;p>N&amp;rsquo;ayant de connaissances avancÃ©es et n&amp;rsquo;ayant effectuÃ© des audits uniquement pour &lt;em>AWS&lt;/em>, j&amp;rsquo;utiliserai dans cet article beaucoup de termes et conseils liÃ©s Ã  ce &lt;em>Cloud Provider&lt;/em>, mais je pense que les Ã©lÃ©ments gÃ©nÃ©raux sont facilement transposables Ã  &lt;em>GCP&lt;/em> et &lt;em>Azure&lt;/em>.&lt;/p>
&lt;hr>
&lt;h2 id="dÃ©finition">DÃ©finition
&lt;/h2>&lt;p>La premiÃ¨re des tÃ¢ches est bien entendu de dÃ©finir le terme de &lt;strong>FinOps&lt;/strong> lui-mÃªme. Il apparaÃ®t Ã©videmment qu&amp;rsquo;il est la contraction de deux termes (comme tous ces &lt;strong>TrucOps&lt;/strong> Ã  la mode ðŸ˜›).
Dans notre cas: &lt;strong>Financial&lt;/strong> + &lt;strong>Operations&lt;/strong>.
Pas trÃ¨s parlant au demeurant, on s&amp;rsquo;attend plus Ã  de la comptabilitÃ© qu&amp;rsquo;Ã  de l&amp;rsquo;architecture &lt;em>Cloud&lt;/em>.&lt;/p>
&lt;p>VoilÃ  donc ma dÃ©finition, avec des morceaux en gras et ce, Ã  dessein:&lt;/p>
&lt;blockquote>
&lt;p>Le &lt;strong>FinOps&lt;/strong> &lt;strong>analyse les architectures&lt;/strong> Cloud et leurs &lt;strong>facturations associÃ©es&lt;/strong>, afin de dÃ©gager des &lt;strong>axes de limitations des coÃ»ts et/ou dâ€™Ã©conomie&lt;/strong>, en assurant &lt;strong>un niveau de risque faible&lt;/strong> et en prenant en compte les &lt;strong>enjeux de l&amp;rsquo;entreprise&lt;/strong>.&lt;/p>&lt;/blockquote>
&lt;p>Reprenons chacune des parties mises en exergue:&lt;/p>
&lt;ul>
&lt;li>&lt;strong>analyse les architectures&lt;/strong>: Le travail de &lt;em>FinOps&lt;/em> est un travail d&amp;rsquo;ingÃ©nierie avant tout, si on se contente de pointer des lignes dans une feuille &lt;em>Excel&lt;/em> pour trouver les services coÃ»tant trop chers dans lesquels il faudrait tailler, cela ne marchera pas.&lt;/li>
&lt;li>&lt;strong>facturations associÃ©es&lt;/strong>: On enfonce une porte ouverte, mais il va de soit que pour cibler les axes d&amp;rsquo;amÃ©liorations, il faut savoir quels sont les services qui sont facturÃ©s et dans quelles mesures (rÃ©duire de 10% le coÃ»t d&amp;rsquo;un service Ã  $100 reste moins intÃ©ressant avant que 2% d&amp;rsquo;un service Ã  $1000, par exemple).&lt;/li>
&lt;li>&lt;strong>axes de limitations des coÃ»ts et/ou dâ€™Ã©conomie&lt;/strong>: La distinction est trÃ¨s importante Ã  mon sens. On cherche souvent Ã  seulement diminuer les coÃ»ts, mais il faut aussi penser Ã  faire en sorte de contrÃ´ler leurs Ã©volutions. J&amp;rsquo;ai souvent expliquÃ© qu&amp;rsquo;une facture de &lt;em>Cloud Provider&lt;/em> qui augmente, ce n&amp;rsquo;est pas forcÃ©ment anormal ou gÃªnant, cela peut juste Ãªtre la consÃ©quence logique de l&amp;rsquo;augmentation de l&amp;rsquo;activitÃ©. Vous avez plus de trafic, et donc plus de consommation mais surtout plus de chiffre d&amp;rsquo;affaires, ce qui est attendu. LÃ  oÃ¹ Ã§a coince c&amp;rsquo;est quand la facture augmente alors que le CA baisse, ou bien que les deux croissent tous deux mais dans des ordres de grandeur trÃ¨s diffÃ©rents (coÃ»ts qui explosent par rapport aux revenus).&lt;/li>
&lt;li>&lt;strong>un niveau de risque faible&lt;/strong>: Quand on met en place des actions &lt;em>FinOps&lt;/em>, on pense souvent Ã  changer les types des Instances (&lt;em>VM&lt;/em>), ou Ã  rÃ©-architecturer des portions de la plateforme. Il est alors trÃ¨s important de garder Ã  l&amp;rsquo;esprit que la plateforme doit assurer un service de mÃªme qualitÃ© (voire plus), et il faut donc Ãªtre trÃ¨s prudent dans les choix et leurs mises en place.&lt;/li>
&lt;li>&lt;strong>enjeux de l&amp;rsquo;entreprise&lt;/strong>: Une plateforme &lt;em>Cloud&lt;/em> n&amp;rsquo;est aprÃ¨s-tout qu&amp;rsquo;un outil, un moyen de dÃ©livrer un service, elle s&amp;rsquo;inscrit dans un cadre beaucoup plus vaste Ã  prendre en compte. Je pense par exemple Ã  la maturitÃ© de l&amp;rsquo;entreprise avec les technologies, ou bien aux contraintes lÃ©gales (&lt;em>PCI-DSS&lt;/em>, &lt;em>HADS&lt;/em>, etc).&lt;/li>
&lt;/ul>
&lt;h2 id="trouver-le-bon-dosage-entre-ha-perfs-et-coÃ»ts">Trouver le bon dosage entre HA, Perfs et CoÃ»ts
&lt;/h2>&lt;p>Fort de cette dÃ©finition, il convient dÃ©sormais d&amp;rsquo;expliciter ce qu&amp;rsquo;on vise en faisant du &lt;strong>FinOps&lt;/strong>, ce qui va guider nos choix.&lt;/p>
&lt;p>Il s&amp;rsquo;agit de trouver le bon dosage entre 3 critÃ¨res:&lt;/p>
&lt;ul>
&lt;li>&lt;strong>Haute-disponibilitÃ©&lt;/strong>&lt;/li>
&lt;li>&lt;strong>Performances&lt;/strong>&lt;/li>
&lt;li>&lt;strong>CoÃ»ts&lt;/strong>&lt;/li>
&lt;/ul>
&lt;p>Les 3 s&amp;rsquo;influencent bien Ã©videmment mutuellement.&lt;/p>
&lt;p>Par exemples:&lt;/p>
&lt;ul>
&lt;li>Si la &lt;strong>HA&lt;/strong> est un critÃ¨re dominante, les coÃ»ts vont forcÃ©ment grimper et les performances peuvent baisser &lt;em>(multi-rÃ©gions, multi-cloud)&lt;/em>.&lt;/li>
&lt;li>Si on privilÃ©gie les &lt;strong>performances&lt;/strong>, des machines plus grosses seront Ã  payer mais la &lt;strong>HA&lt;/strong> pourra Ãªtre sacrifiÃ©e Ã©galement &lt;em>(j&amp;rsquo;ai eu un client qui faisait tout tourner sur une seule AZ AWS car les latences entre les datacenters AWS avaient un impact sur sa grille de calcul)&lt;/em>.&lt;/li>
&lt;li>Si on cherche absolument Ã  baisser les coÃ»ts, on sacrifiera les &lt;strong>performances&lt;/strong> et/ou la &lt;strong>haute-disponibilitÃ©&lt;/strong>.&lt;/li>
&lt;/ul>
&lt;h3 id="un-autre-critÃ¨re-Ã -prendre-en-compte-la-sÃ©curitÃ©">Un autre critÃ¨re Ã  prendre en compte: la SÃ©curitÃ©
&lt;/h3>&lt;p>J&amp;rsquo;ai volontairement omis de rajouter ce 4Ã¨me critÃ¨re dans la liste prÃ©cÃ©dente, car il est particulier et Ã  toute son importance. Il impacte potentiellement les 3 autres critÃ¨res et s&amp;rsquo;inscrit dans un cadre plus important trÃ¨s souvent impossible Ã  nÃ©gliger (&lt;em>PCI-DSS&lt;/em>, &lt;em>HADS&lt;/em>, etc). Il faut donc veiller Ã  ce que les recommandations s&amp;rsquo;inscrivent dans les bonnes pratiques de sÃ©curitÃ©, voire dans le cadre de la loi.&lt;/p>
&lt;h3 id="ajuster-ses-critÃ¨res">Ajuster ses critÃ¨res
&lt;/h3>&lt;p>Il ressort de tout cela une bonne nouvelle, c&amp;rsquo;est que nous sommes dans le cadre d&amp;rsquo;une plateforme &lt;em>Cloud&lt;/em>, qui vient avec ses contraintes mais aussi ses avantages, avec en tÃªte de la liste la flexibilitÃ©.&lt;/p>
&lt;p>J&amp;rsquo;ai mentionnÃ© prÃ©cÃ©demment que tout l&amp;rsquo;art du &lt;em>FinOps&lt;/em> Ã©tait de trouver le bon dosage entre les &lt;em>perfs&lt;/em>, la &lt;em>HA&lt;/em> et les &lt;em>coÃ»ts&lt;/em>, et ce qu&amp;rsquo;il y a de &lt;em>magique&lt;/em> avec le &lt;em>Cloud&lt;/em>, c&amp;rsquo;est que ce dosage n&amp;rsquo;est pas vouÃ© Ã  Ãªtre immuable et universel. La souplesse des &lt;em>Cloud Providers&lt;/em> permet d&amp;rsquo;ajuster la balance comme on le souhaite et quand on le souhaite.&lt;/p>
&lt;p>Voici une liste d&amp;rsquo;Ã©lÃ©ments pouvant amener Ã  adapter notre choix du ou des critÃ¨res dominants, avec quelques exemples pour les expliciter:&lt;/p>
&lt;ul>
&lt;li>&lt;strong>Environnement&lt;/strong>: On accorde souvent plus d&amp;rsquo;importance Ã  la disponibilitÃ© de l&amp;rsquo;environnement de production qu&amp;rsquo;Ã  celui de staging.&lt;/li>
&lt;li>&lt;strong>PÃ©riode&lt;/strong>: En e-commerce, on mettra le paquet en pÃ©riode de soldes. Une application de facturation n&amp;rsquo;a besoin d&amp;rsquo;Ãªtre gonflÃ©e aux stÃ©roÃ¯des qu&amp;rsquo;en dÃ©but ou fin de mois, etc.&lt;/li>
&lt;li>&lt;strong>CriticitÃ© des donnÃ©es&lt;/strong>: On peut parfois se permettre de perdre du cache, mais pas des donnÃ©es mÃ©tier.&lt;/li>
&lt;li>&lt;strong>CriticitÃ© de l&amp;rsquo;application&lt;/strong>: Un SSO sera central, alors qu&amp;rsquo;un &lt;em>worker&lt;/em> qui tombe ne crÃ©e que du dÃ©lai et sa tÃ¢che sera censÃ©e Ãªtre reprise ensuite.&lt;/li>
&lt;li>&lt;strong>Enjeux Business&lt;/strong>: Respect des SLA de disponibilitÃ© ou de performance.&lt;/li>
&lt;li>&lt;strong>Budget&lt;/strong>: Une levÃ©e de fond permet souvent d&amp;rsquo;apporter les modifications voulues ou Ã  l&amp;rsquo;inverse, un trou dans la trÃ©sorerie imposera de sacrifier tel ou tel critÃ¨re.&lt;/li>
&lt;/ul>
&lt;h2 id="coÃ»ts-et-modÃ¨les-de-facturation">CoÃ»ts et modÃ¨les de facturation
&lt;/h2>&lt;p>Il est extrÃªmement important d&amp;rsquo;avoir Ã  l&amp;rsquo;esprit de quoi sont composÃ©es les factures mais aussi le contexte global dans lesquelles elles s&amp;rsquo;inscrivent.&lt;/p>
&lt;p>Je dÃ©gage donc 2 axes, les coÃ»ts &lt;em>Directs&lt;/em> et les coÃ»ts &lt;em>Indirects&lt;/em>.&lt;/p>
&lt;p>On ne pourra pas jouer sur les deux de la mÃªme faÃ§on, voire pas du tout pour certains Ã©lÃ©ments. Et il est trÃ¨s important de tous les prendre en compte dans les choix des actions Ã  mener.&lt;/p>
&lt;h3 id="les-coÃ»ts-directs">Les coÃ»ts Directs
&lt;/h3>&lt;p>Je classe parmi les coÃ»ts &lt;em>Directs&lt;/em> tout ce qui est directement dans la facture du &lt;em>Cloud Provider&lt;/em>, en sÃ©parant en 2 catÃ©gories:&lt;/p>
&lt;ul>
&lt;li>&lt;strong>Ressources&lt;/strong>: Ce sont les coÃ»ts dans les factures les plus simples Ã  comprendre et estimer, gÃ©nÃ©ralement facturÃ©s Ã  la seconde ou heure, ils caractÃ©risent les Ã©lÃ©ments &amp;ldquo;immobilisÃ©s&amp;rdquo; pour composer l&amp;rsquo;infrastructure (&lt;em>Instances&lt;/em>, &lt;em>Volumes&lt;/em>, etc). La rÃ¨gle est simple, plus on prend gros, plus on paye cher, et inversement. On peut donc facilement estimer les Ã©conomies possibles quand on agit sur elles.&lt;/li>
&lt;li>&lt;strong>Consommations&lt;/strong>: Ce sont tous les coÃ»ts dans les factures plus difficiles Ã  estimer car indÃ©pendant de nos propres choix et variant du tout ou tout entre les pÃ©riodes. On y classe la bande passante, les snapshots, le nombre total de requÃªtes, etc. Les estimations d&amp;rsquo;Ã©conomies sont souvent moins prÃ©cises mais en connaissant bien son activitÃ© et en prenant quelques marges, on y arrive.&lt;/li>
&lt;/ul>
&lt;h3 id="les-coÃ»ts-indirects">Les coÃ»ts Indirects
&lt;/h3>&lt;p>Quand on pense Ã  rÃ©duire sa facture &lt;em>Cloud&lt;/em> on oublie bien souvent les coÃ»ts annexes qui n&amp;rsquo;apparaissent pas Ã  proprement parlÃ© sur la facture mais qui sont pourtant bien lÃ  quand on veut mettre en place des actions:&lt;/p>
&lt;ul>
&lt;li>&lt;strong>CoÃ»ts de migration&lt;/strong>: Si vous prÃ©voyez de remplacer des morceaux ou de partir sur une nouvelle architecture, il sera nÃ©cessaire de passer un grand nombre de &lt;em>JH&lt;/em> (jour-homme) sur le sujet, et cela aura un coÃ»t pour votre organisation, tant financier qu&amp;rsquo;humain. Le retour sur investissements se doit donc d&amp;rsquo;Ãªtre intÃ©ressant.&lt;/li>
&lt;li>&lt;strong>CoÃ»ts de dÃ©veloppement&lt;/strong>: Dans la mÃªme idÃ©e, moins &lt;em>OPS&lt;/em> et plus &lt;em>DEV&lt;/em>, si vous changez de technologie, il y aura sÃ»rement du code Ã  Ã©crire et donc du &lt;em>JH&lt;/em> Ã  passer, sur des fonctionnalitÃ©s qui n&amp;rsquo;apportent pas forcÃ©ment une plus-value pour le client final.&lt;/li>
&lt;li>&lt;strong>Formation&lt;/strong>: Un point Ã  ne jamais nÃ©gliger, tout changement sera mieux vÃ©cu s&amp;rsquo;il est accompagnÃ© par une formation, qu&amp;rsquo;elle soit interne ou non (c&amp;rsquo;est souvent plus cher avec des consultants extÃ©rieurs, bien entendu).&lt;/li>
&lt;li>&lt;strong>InfogÃ©rance&lt;/strong>: Si vous ne gÃ©rez pas vous-mÃªme votre plateforme, ou si vous avez souscrit un contrat pour avoir du 24/7, le pÃ©rimÃ¨tre financier peut Ãªtre impactÃ©.&lt;/li>
&lt;li>&lt;strong>Licences&lt;/strong>: C&amp;rsquo;est un point surtout valable pour les migrations d&amp;rsquo;&lt;em>On-Premise&lt;/em> vers du &lt;em>Cloud&lt;/em>, les modÃ¨les de facturation des licences Ã©diteurs pouvant beaucoup changer, et pas forcÃ©ment Ã  la baisse.&lt;/li>
&lt;/ul>
&lt;p>Ces coÃ»ts &lt;em>Indirects&lt;/em> sont bien souvent plus difficiles Ã  Ã©valuer, voire quasi impossibles quand vous Ãªtes un auditeur externe, mais il est important de prendre en compte le fait qu&amp;rsquo;ils existent et peuvent drastiquement changer le choix des actions Ã  mener.&lt;/p>
&lt;h2 id="finops-un-processus">FinOps, un processus
&lt;/h2>&lt;p>Maintenant que nous avons la destination, voyons le chemin. A mon sens, le &lt;em>FinOps&lt;/em> est un processus qui se dÃ©roulera toute la vie de la plateforme et dÃ©bute Ã  sa conception. Il apparaÃ®t bien souvent que rÃ©flÃ©chir Ã  une architecture en intÃ©grant les aspects &lt;em>FinOps&lt;/em> dÃ¨s le dÃ©but, amÃ¨ne Ã  crÃ©er des conceptions plus proches des bonnes pratiques.&lt;/p>
&lt;p>Ce processus Ã  plusieurs caractÃ©ristiques, il est:&lt;/p>
&lt;ul>
&lt;li>&lt;em>Continue&lt;/em>&lt;/li>
&lt;li>&lt;em>ItÃ©ratif&lt;/em> (une action aprÃ¨s l&amp;rsquo;autre)&lt;/li>
&lt;li>&lt;em>A complexitÃ© croissante&lt;/em> (voire exponentielle)&lt;/li>
&lt;/ul>
&lt;p>Ce processus, peut varier d&amp;rsquo;une entreprise Ã  l&amp;rsquo;autre, mais on retrouve gÃ©nÃ©ralement 3 Ã©tapes clÃ©s, se rÃ©pÃ©tant:&lt;/p>
&lt;blockquote>
&lt;p>Analyse &amp;gt; Recommandations &amp;gt; Mise en place &amp;gt; Analyse &amp;gt; &amp;hellip;&lt;/p>&lt;/blockquote>
&lt;h3 id="un-processus-continue">Un processus continue
&lt;/h3>&lt;p>Les architectures &lt;em>Cloud&lt;/em> Ã©tant Ã©lastiques, les facturations associÃ©es le sont tout autant. A cela s&amp;rsquo;ajoute que le tout virtualisÃ©, payÃ© Ã  la consommation, rend les architectures mutables (changement de types de machines, remplacement de briques par d&amp;rsquo;autres services, etc). Il apparaÃ®t alors Ã©vident que mener des actions &lt;em>FinOps&lt;/em> une fois tous les trimestres, par exemple, sera moins pertinent, et pire, Ã  la traÃ®ne vis-Ã -vis des dÃ©penses.&lt;/p>
&lt;p>Il est important d&amp;rsquo;intÃ©grer le &lt;em>FinOps&lt;/em> parmi tous les autres processus permettant de gÃ©rer correctement une plateforme, voire mÃªme d&amp;rsquo;intÃ©grer des points de contrÃ´le au mÃªme titre que nous mettons en place du &lt;em>monitoring&lt;/em> pour les systÃ¨mes eux-mÃªmes. Les &lt;em>Cloud Providers&lt;/em> ne s&amp;rsquo;y sont pas trompÃ©s et fournissent des moyens de vÃ©rifier le respect d&amp;rsquo;un budget (sans jamais bloquer les possibles dÃ©penses, on parle juste d&amp;rsquo;alertes). Cela rentre dans la partie de ma dÃ©finition: &lt;code>limiter les coÃ»ts&lt;/code>.&lt;/p>
&lt;p>Cela n&amp;rsquo;Ã©carte pas les audits plus profonds pouvant Ãªtre menÃ©s, non pas au jour le jour, mais tout de mÃªme rÃ©guliÃ¨rement, et qui eux servent souvent Ã  dÃ©gager les axes d&amp;rsquo;Ã©conomies plus importantes.&lt;/p>
&lt;h3 id="un-processus-itÃ©ratif">Un processus itÃ©ratif
&lt;/h3>&lt;p>Une fois qu&amp;rsquo;une analyse &lt;em>FinOps&lt;/em> a Ã©tÃ© menÃ©e Ã  bien et que des prÃ©conisations ont Ã©tÃ© Ã©tablies, la tentation de rÃ©duire la facture immÃ©diatement peut Ãªtre forte en menant toutes les actions d&amp;rsquo;un coup. C&amp;rsquo;est rarement une bonne chose. En menant plusieurs actions en parallÃ¨le, il devient plus difficile de dÃ©terminer quelles sont celles qui ont eu l&amp;rsquo;effet escomptÃ©, et pire, certaines peuvent entrer en contradiction sans qu&amp;rsquo;il ne soit possible de dÃ©terminer comment. En itÃ©rant, action par action, il devient aisÃ© de dÃ©terminer celles qui ont bien fonctionnÃ© et donc de les rÃ©pÃ©ter dans le temps ou sur d&amp;rsquo;autres environnements.&lt;/p>
&lt;h3 id="un-processus-Ã -complexitÃ©-croissante">Un processus Ã  complexitÃ© croissante
&lt;/h3>&lt;p>La premiÃ¨re action (cf suite de l&amp;rsquo;article) est gÃ©nÃ©ralement de traquer les dÃ©penses inutiles, les gÃ¢chis. C&amp;rsquo;est une action relativement simple, qu&amp;rsquo;on peut faire manuellement dans un premier temps puis automatisÃ©e. Une fois que c&amp;rsquo;est en place, d&amp;rsquo;autres actions peuvent Ãªtre menÃ©es, forcÃ©ment plus compliquÃ©es que les prÃ©cÃ©dentes, et ainsi de suite. Il apparaÃ®t rapidement que le rapport Ã©conomies possibles sur investissement (temps + argent) s&amp;rsquo;amenuise avec le temps, plus on avance dans les solutions trouvÃ©es pour limiter les coÃ»ts ou Ã©conomiser, plus celles-ci deviennent complexes Ã  mettre en oeuvre. Je pense mÃªme que la tendance suivie est exponentielle. L&amp;rsquo;ordre de grandeur de l&amp;rsquo;investissement n&amp;rsquo;est pas du tout le mÃªme entre une automatisation de la suppression des volumes dÃ©tachÃ©s et la refonte d&amp;rsquo;une partie de l&amp;rsquo;infrastructure pour utiliser du &lt;em>Serverless&lt;/em>.&lt;/p>
&lt;h2 id="outillage">Outillage
&lt;/h2>&lt;p>Avec quoi pouvons-nous mener une analyse &lt;em>FinOps&lt;/em>?&lt;/p>
&lt;p>Il s&amp;rsquo;agit bien entendu d&amp;rsquo;une liste non exhaustive, mais c&amp;rsquo;est une demande qui m&amp;rsquo;a souvent Ã©tÃ© faÃ®te donc la voici.&lt;/p>
&lt;h2 id="les-factures">Les Factures
&lt;/h2>&lt;p>Les factures sont, bien entendu, les premiÃ¨res piÃ¨ces Ã  Ã©tudier, elles sont souvent simplifiÃ©es et permettent d&amp;rsquo;avoir un aperÃ§u global ainsi que les tendances. C&amp;rsquo;est aussi ce que reÃ§oit votre service comptabilitÃ© (Ã§a aidera pour communiquer avec eux, pour lui expliquer les possibles pics ou autres quand c&amp;rsquo;est nÃ©cessaire).&lt;/p>
&lt;h2 id="aws-cost-explorertrusted-advisor">AWS Cost Explorer/Trusted Advisor
&lt;/h2>&lt;p>AWS fournit 2 outils:&lt;/p>
&lt;ul>
&lt;li>&lt;strong>Cost Explorer&lt;/strong>: Cela va Ãªtre votre nouvel meilleur ami. L&amp;rsquo;outil s&amp;rsquo;amÃ©liore d&amp;rsquo;annÃ©e en annÃ©e et vous permet d&amp;rsquo;analyser et de mettre en graphique tout votre historique de dÃ©penses, de filtrer par tags, service, rÃ©gion, etc. C&amp;rsquo;est vraiment un indispensable et il faut vraiment apprendre Ã  s&amp;rsquo;en servir. La difficultÃ© est de comprendre ce qu&amp;rsquo;on lit, car contrairement aux factures, les dÃ©tails se basent sur l&amp;rsquo;API AWS et non une simplification des termes comme dans les factures reÃ§ues en fin de mois.&lt;/li>
&lt;li>&lt;strong>Trusted Advisor&lt;/strong>: Lorsque vous souscrivez au support de niveau &lt;strong>Business&lt;/strong>, en plus de donner de bonnes informations liÃ©es Ã  la sÃ©curitÃ© de votre plateforme, l&amp;rsquo;outil vous donne des informations sur les gÃ¢chis financiers prÃ©sents dans le compte. La nÃ©cessitÃ© d&amp;rsquo;avoir un haut niveau de support pour que ce soit actif peut Ãªtre contraignant mais heureusement, les Ã©lÃ©ments donnÃ©s sont relativement simples Ã  obtenir Ã  la main ou via script.&lt;/li>
&lt;/ul>
&lt;h2 id="les-scripts">Les Scripts
&lt;/h2>&lt;p>Il existe une plÃ©thore de scripts voire d&amp;rsquo;applications complÃ¨tes sur le web pour aider Ã  analyser ses coÃ»ts et trouver les axes d&amp;rsquo;amÃ©lioration. Vous pouvez Ã©galement Ã©crire vos propres scripts pour mettre en avant des points prÃ©cis liÃ©s Ã  votre infrastructure. L&amp;rsquo;avantage de l&amp;rsquo;automatisation est bien entendu de vous faire gagner du temps mais surtout de pouvoir avoir des rÃ©sultats rÃ©guliers et donc de suivre les rÃ©sultats de vos modifications.&lt;/p>
&lt;p>Voici quelques exemples (les deux premiers sont de moi):&lt;/p>
&lt;ul>
&lt;li>&lt;a class="link" href="https://github.com/claranet/go-s3-describe" target="_blank" rel="noopener"
>go-s3-describe&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://github.com/claranet/aws-inventory-graph" target="_blank" rel="noopener"
>aws-inventory-graph&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://github.com/mlabouardy/komiser" target="_blank" rel="noopener"
>komiser&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>Et une recherche sur Github avec quelques autres outils: &lt;a class="link" href="https://github.com/search?q=finops&amp;#43;aws&amp;amp;type=Repositories" target="_blank" rel="noopener"
>RÃ©sultats&lt;/a>&lt;/p>
&lt;h2 id="saas">SaaS
&lt;/h2>&lt;p>L&amp;rsquo;engouement pour le &lt;em>FinOps&lt;/em> vient forcÃ©ment avec son lot de services en ligne pour aider dans la tÃ¢che, en voici deux que j&amp;rsquo;ai testÃ©s (je ne ferai pas de comparatif, n&amp;rsquo;y ayant pas touchÃ© depuis longtemps maintenant):&lt;/p>
&lt;ul>
&lt;li>&lt;a class="link" href="https://www.cloudhealthtech.com/" target="_blank" rel="noopener"
>Cloudhealth&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://cloudcheckr.com/" target="_blank" rel="noopener"
>Cloudcheckr&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>Ces outils font plus que du &lt;em>FinOps&lt;/em>, mais comme leurs coÃ»ts rentrent dans ce que j&amp;rsquo;appelle les coÃ»ts &lt;em>Indirects&lt;/em>, il faut donc les prendre en compte dans vos calculs pour estimer les Ã©conomies.&lt;/p>
&lt;h2 id="websites">Websites
&lt;/h2>&lt;p>Le web fourmille de documentations et d&amp;rsquo;articles comme celui-ci, il ne faudra pas hÃ©siter Ã  chercher des heures durant pour apprendre les techniques en vogue pour limiter les coÃ»ts ou mÃªme dÃ©coder la documentation AWS parfois absconde.&lt;/p>
&lt;p>Voici un exemple d&amp;rsquo;outils que l&amp;rsquo;on peut trouver et utiliser frÃ©quemment:&lt;/p>
&lt;ul>
&lt;li>&lt;a class="link" href="https://Instances.vantage.sh" target="_blank" rel="noopener"
>https://Instances.vantage.sh&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://calculator.aws/#/" target="_blank" rel="noopener"
>https://calculator.aws/#/&lt;/a> (calculateur officiel fourni par &lt;em>AWS&lt;/em>)&lt;/li>
&lt;li>&lt;a class="link" href="https://observablehq.com/@rustyconover/aws-ec2-spot-Instance-simulator" target="_blank" rel="noopener"
>https://observablehq.com/@rustyconover/aws-ec2-spot-Instance-simulator&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="schÃ©mas">SchÃ©mas
&lt;/h2>&lt;p>Le &lt;em>FinOps&lt;/em> est un travail technique, mÃªme si on Ã©pluche bien les factures, il est intÃ©ressant d&amp;rsquo;avoir la vision de la plateforme en terme d&amp;rsquo;architecture. Comprendre comment les choses sont pensÃ©es, de l&amp;rsquo;Instance aux services managÃ©s. Le nec plus ultra Ã©tant d&amp;rsquo;avoir Ã©galement les flux rÃ©els et pas juste un schÃ©ma de principe, les flux Ã©tant souvent trÃ¨s difficiles Ã  catÃ©goriser et encore plus Ã  comprendre niveau facturation.&lt;/p>
&lt;p>Voici un schÃ©ma de quelques flux avec les sens pour lesquels AWS vous facture:&lt;/p>
&lt;p>&lt;img src="https://thomas.labarussias.fr/posts/finops/img/aws-flux.png"
width="1962"
height="1076"
srcset="https://thomas.labarussias.fr/posts/finops/img/aws-flux_hu_13aec99b78a5c9ad.png 480w, https://thomas.labarussias.fr/posts/finops/img/aws-flux_hu_c50d7d94b5275590.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="182"
data-flex-basis="437px"
>&lt;/p>
&lt;h2 id="la-mÃ©trologie">La MÃ©trologie
&lt;/h2>&lt;p>Tous les &lt;em>Cloud Providers&lt;/em> fournissent leurs propres solutions de mÃ©trologie, plus ou moins avancÃ©es. Dans le cas d&amp;rsquo;AWS, la solution s&amp;rsquo;appelle &lt;em>Cloudwatch&lt;/em>. Bien que pratiques, il est nÃ©cessaire, pour Ã©valuer le bon usage des ressources, d&amp;rsquo;avoir son propre systÃ¨me de mÃ©trologie, avec une granularitÃ© plus fine, mais surtout plus de mÃ©triques.
Prenons le cas de l&amp;rsquo;utilisation CPU, qui est certes rarement un facteur limitant sur des services Web, l&amp;rsquo;utilisation de la mÃ©moire ou les IO Ã©tant plus Ã  suivre. Vous n&amp;rsquo;avez aucune information sur les contextes d&amp;rsquo;exÃ©cution (&lt;em>user&lt;/em>, &lt;em>system&lt;/em>, &lt;em>steal&lt;/em>, &lt;em>iowait&lt;/em>, &amp;hellip;).
Dans le cas de la RAM, votre &lt;em>Cloud Provider&lt;/em> ne vous fournira pas de dÃ©tails sur son utilisation, difficile de juger en l&amp;rsquo;Ã©tat de la pertinence de sa taille pour vos besoins.&lt;/p>
&lt;h2 id="beaucoup-dactions-possibles">Beaucoup d&amp;rsquo;actions possibles
&lt;/h2>&lt;p>La liste suivante d&amp;rsquo;actions catÃ©gorisÃ©es &lt;em>FinOps&lt;/em> ne se veut absolument pas complÃ¨te, chaque service ayant ses spÃ©cificitÃ©s et les modÃ¨les de facturation Ã©voluant aussi dans le temps. Encore une fois, mÃªme si trÃ¨s orientÃ© &lt;em>AWS&lt;/em>, elles sont tout ou en partie transposables Ã  d&amp;rsquo;autres &lt;em>Cloud Providers&lt;/em>.&lt;/p>
&lt;h3 id="catÃ©goriser-les-actions-Ã -entreprendre">CatÃ©goriser les actions Ã  entreprendre
&lt;/h3>&lt;p>Afin de pouvoir mieux Ã©valuer les pertinences des actions prÃ©conisÃ©es mais aussi de pouvoir les prioriser, j&amp;rsquo;ai pris l&amp;rsquo;habitude de les catÃ©goriser selon 3 critÃ¨res:&lt;/p>
&lt;ul>
&lt;li>&lt;em>ComplexitÃ©&lt;/em>: C&amp;rsquo;est souvent un bon moyen pour aider Ã  estimer le temps qui sera nÃ©cessaire pour la mise en oeuvre.&lt;/li>
&lt;li>&lt;em>Risque&lt;/em>: Notre but, comme explicitÃ© dans ma dÃ©finition, est de ne pas dÃ©grader la production, mais toute action Ã  sa part de risque, surtout lors d&amp;rsquo;une bascule d&amp;rsquo;un morceau d&amp;rsquo;architecture Ã  une autre, ou bien lors de la rÃ©duction du type d&amp;rsquo;une Instance.&lt;/li>
&lt;li>&lt;em>Economies attendues&lt;/em>: En valeur absolue bien souvent, et Ã  mettre en perspective avec les deux autres critÃ¨res. Il peut Ãªtre pertinent de faire une action simple, sans risque qui fait Ã©conomiser $100 plutÃ´t qu&amp;rsquo;une refonte compliquÃ©e qui fera gagner $200 mais demandera 10JH par ailleurs (rappelez-vous, les coÃ»ts &lt;em>Indirects&lt;/em>).&lt;/li>
&lt;/ul>
&lt;p>Lorsque l&amp;rsquo;audit &lt;em>FinOps&lt;/em> est pour un client tiers, cela sera d&amp;rsquo;autant plus important de lui permettre d&amp;rsquo;Ã©valuer les actions qu&amp;rsquo;il voudra mener ou faire mener, lui seul ayant les cordons de sa bourse.&lt;/p>
&lt;h3 id="identifier-et-supprimer-les-gÃ¢chis">Identifier et supprimer les gÃ¢chis
&lt;/h3>&lt;p>La premiÃ¨re action Ã  laquelle on pense, est bien Ã©videmment de rÃ©duire les gÃ¢chis. La flexibilitÃ© du &lt;em>Cloud&lt;/em> amenant souvent Ã  crÃ©er puis laisser traÃ®ner des ressources dans un coin.&lt;/p>
&lt;p>Voici une liste de quelques gÃ¢chis communs:&lt;/p>
&lt;ul>
&lt;li>&lt;em>Snapshots anciens&lt;/em>: Plusieurs cas de figures, soit ce sont des &lt;em>Snapshots&lt;/em> pour des &lt;em>AMI&lt;/em> obsolÃ¨tes, soit de volumes &lt;em>EBS&lt;/em> n&amp;rsquo;existant plus. Il se peut que ce soit de vieux &lt;em>Snapshots&lt;/em> d&amp;rsquo;&lt;em>EBS&lt;/em> encore en fonctionnement, dans ce cas, comme ils sont sauvegardÃ©s de maniÃ¨re incrÃ©mentale, leurs suppressions entraÃ®neront un gain moins important sur la facture, les plus rÃ©cents ayant toujours besoin d&amp;rsquo;une rÃ©fÃ©rence.&lt;/li>
&lt;li>&lt;em>AMI Anciennes&lt;/em>: Sauf si cela s&amp;rsquo;avÃ¨re vraiment nÃ©cessaire, il n&amp;rsquo;est pas utile de garder de vieilles &lt;em>AMI&lt;/em>, avec des systÃ¨mes et des paquets obsolÃ¨tes. Leurs suppressions ne font rien gagner Ã  proprement parlÃ©, mais libÃ¨rent des &lt;em>Snapshots&lt;/em> qui eux peuvent ensuite Ãªtre supprimÃ©s.&lt;/li>
&lt;li>&lt;em>EIP dÃ©tachÃ©es&lt;/em>: Le gain est minime, mais si vraiment elles ne servent Ã  rien, autant les libÃ©rer.&lt;/li>
&lt;li>&lt;em>EBS dÃ©tachÃ©s&lt;/em>: Cela vient souvent de la suppression d&amp;rsquo;&lt;em>Instances&lt;/em> sans suppression des volumes qui les utilisaient. Si en plus il y avait de l&amp;rsquo;&lt;em>AutoScaling&lt;/em> d&amp;rsquo;actif, les volumes peuvent vite monter.&lt;/li>
&lt;li>&lt;em>EBS attachÃ©s mais sans IO&lt;/em>: Le coup classique du volume montÃ© sur &lt;code>/logs&lt;/code> mais oÃ¹ aucune application n&amp;rsquo;Ã©crit dedans.&lt;/li>
&lt;li>&lt;em>ELB/ALB/NLB sans Instance ou sans requÃªte&lt;/em>: Il arrivent que des &lt;code>xLB&lt;/code> ne pointent vers rien, ou bien que les &lt;em>Instances&lt;/em> derriÃ¨res soient &lt;em>Unhealthy&lt;/em> depuis trÃ¨s longtemps, sans aucun impact par ailleurs.&lt;/li>
&lt;li>&lt;em>EC2/RDS dans des anciens types&lt;/em>: A chaque nouvelle famille sortie par &lt;em>AWS&lt;/em>, les prix sont plus faibles, pour parfois de meilleures performances ou options.&lt;/li>
&lt;li>&lt;em>EC2 stoppÃ©es depuis longtemps&lt;/em>: Le &lt;em>compute&lt;/em> n&amp;rsquo;est pas payÃ© dans ce cas, seul le stockage, cela peut Ãªtre lÃ©gitime ou non. A vous de voir.&lt;/li>
&lt;li>&lt;em>Buckets S3 avec des objets de type Reduced Redundancy Storage Class&lt;/em>: AWS a dÃ©prÃ©ciÃ© ce type d&amp;rsquo;objet, en le rendant lÃ©gÃ¨rement plus chÃ¨re d&amp;rsquo;un milliÃ¨me que le type &lt;em>Standard&lt;/em>, sur des Po voire To, cela vite (histoire vÃ©cue avec une plateforme de streaming de musique)&lt;/li>
&lt;li>&lt;em>Buckets S3 Buckets qui sont Publics mais pas derriÃ¨re une distribution CloudFront&lt;/em>: Rien que le fait de sortir sur Internet Ã  travers une distribution &lt;em>Cloudfront&lt;/em> rÃ©duit les coÃ»ts de bande passante, cache activÃ© ou non. Ceci est valable dans tous les cas, devant &lt;code>xLB&lt;/code> ou &lt;code>EC2&lt;/code>.&lt;/li>
&lt;li>&lt;em>RDS sans connexion depuis longtemps&lt;/em>: Si la base ne sert que de temps en temps, il est toujours possible de l&amp;rsquo;Ã©teindre (pour 7j maximum, ensuite il faudra Ã©teindre de nouveau).&lt;/li>
&lt;li>&lt;em>RDS utilisant du PIOPS inutile&lt;/em>: Pour chaque GB de &lt;em>GP2/3&lt;/em>, &lt;em>AWS&lt;/em> assure un plancher de 3 IOPS, ce qui implique qu&amp;rsquo;avec 350GB, vous avez plus (1050 IOPS) que les 1000 IOPS demandÃ©s Ã  Ãªtre payÃ©s en minimum pour le stockage &lt;em>PIOPS&lt;/em>, et ce pour beaucoup moins cher.&lt;/li>
&lt;/ul>
&lt;p>Pour vous aider Ã  identifier ces Ã©lÃ©ments, l&amp;rsquo;&lt;em>API&lt;/em> et les mÃ©triques en votre possession seront trÃ¨s utiles.&lt;/p>
&lt;h3 id="utiliser-correctement-les-ressources">Utiliser correctement les ressources
&lt;/h3>&lt;h4 id="les-ressources-managÃ©es">Les ressources managÃ©es
&lt;/h4>&lt;p>Avec l&amp;rsquo;avÃ¨nement du &lt;em>Cloud&lt;/em>, sa souplesse et sa rapiditÃ© pour obtenir des ressources, on en vient presque Ã  oublier les rÃ©flexes de nos prÃ©dÃ©cesseurs, contraints Ã  tirer jusqu&amp;rsquo;Ã  la derniÃ¨re goutte de sÃ¨ve des machines achetÃ©es pour plusieurs annÃ©es.
Je crois fermement, qu&amp;rsquo;avant d&amp;rsquo;entamer des changements de type, surtout lors de &lt;em>Scale Up&lt;/em> (augmentation du type), il faut travailler au niveau de l&amp;rsquo;&lt;em>OS&lt;/em> et des applications pour obtenir le maximum. Tout rÃ©soudre par de l&amp;rsquo;infra n&amp;rsquo;a jamais Ã©tÃ© pertinent (le fameux plus de RAM, toujours plus de RAM, au lieu de traiter la fuite mÃ©moire).&lt;/p>
&lt;h4 id="los-et-les-applications">L&amp;rsquo;OS et les Applications
&lt;/h4>&lt;p>Dans le cas des ressources managÃ©es, surtout &lt;em>RDS&lt;/em>, de trÃ¨s nombreux rÃ©glages sont Ã  disposition pour paramÃ©trer les moteurs (taille des &lt;em>buffers&lt;/em>, allocation de tables temporaires, nombre max de connexions, etc). Les ajuster au rÃ©el besoin mÃ©tier peut parfois changer du tout au tout les performances.&lt;/p>
&lt;p>Pour les EC2, c&amp;rsquo;est encore plus vrai, car on peut jouer sur bien plus de rÃ©glages comme:&lt;/p>
&lt;ul>
&lt;li>les &lt;em>paramÃ¨tres sysctl&lt;/em>: Tous les &lt;em>OS Unix-Like&lt;/em> permettent de rÃ©gler des paramÃ¨tres du &lt;em>kernel&lt;/em>, dont beaucoup de limites. En ajustant ces valeurs, on peut souvent repousser les capacitÃ©s utilisables.&lt;/li>
&lt;li>les &lt;em>configurations des applications&lt;/em>: La majoritÃ© des applications, surtout dans le monde du &lt;em>Web OpenSource&lt;/em>, permettent d&amp;rsquo;Ãªtre configurÃ©es jusqu&amp;rsquo;au plus petit dÃ©tails pour assurer leurs charges (&lt;em>worker_processes&lt;/em> ou &lt;em>keepalives&lt;/em> pour &lt;em>Nginx&lt;/em> par exemple).&lt;/li>
&lt;/ul>
&lt;h4 id="compiler-ses-binaires">Compiler ses binaires
&lt;/h4>&lt;p>Une autre option, bien moins rÃ©pandue, car plus difficile Ã  mettre en oeuvre, est le fait d&amp;rsquo;utiliser des binaires compilÃ©s pour l&amp;rsquo;architecture &lt;em>CPU&lt;/em> de l&amp;rsquo;&lt;em>EC2&lt;/em> utilisÃ©e. Cela peut paraÃ®tre farfelu, surtout que cela apporte une grande complexitÃ© et sort totalement du cadre des gestionnaires de paquets si pratiques. Mais aprÃ¨s tout, utiliser des binaires compilÃ©s en dehors de toute arborescence, c&amp;rsquo;est une chose trÃ¨s rÃ©pandue, et cela s&amp;rsquo;appelle un &lt;em>Container&lt;/em> ðŸ˜‰. AWS fournit pour chaque type d&amp;rsquo;&lt;em>Instance&lt;/em> le modÃ¨le de &lt;em>CPU&lt;/em> associÃ©, Ã  votre charge de trouver les bons &lt;em>flags&lt;/em> Ã  utiliser pour la compilation, et de penser Ã  les modifier Ã  chaque changement de type (par un exemple, un rendu &lt;em>Blender&lt;/em> via le &lt;em>CPU&lt;/em> peut gagner jusqu&amp;rsquo;Ã  30% de temps [du vÃ©cu], imaginez pour la capacitÃ© de traitements de requÃªtes par un &lt;em>Apache&lt;/em> ou &lt;em>Nginx/PHP-FPM&lt;/em>).&lt;/p>
&lt;h3 id="utiliser-les-services-managÃ©s">Utiliser les services managÃ©s
&lt;/h3>&lt;p>Utiliser des services managÃ©s a un coÃ»t, c&amp;rsquo;est indÃ©niable, mais ils sont Ã  relativiser et Ã  mettre en perspective avec les coÃ»ts &lt;em>Indirects&lt;/em>. Entre un &lt;em>PostgreSQL&lt;/em> managÃ© et un &lt;em>PostgreSQL&lt;/em> installÃ© Ã  la main sur un serveur louÃ©, il se peut que la solution du &lt;em>Cloud Provider&lt;/em> soit plus chÃ¨re, mais si vous rajoutez dans votre solution maison les coÃ»ts financiers et humains pour la gestion des backups, des possibles restaurations, de la haute disponibilitÃ©, etc, sans avoir en plus forcÃ©ment la capacitÃ© de changer la taille de la machine ou agrandir son stockage, la balance ne penche plus du mÃªme cÃ´tÃ©. Encore une fois, s&amp;rsquo;arrÃªter uniquement aux coÃ»ts matÃ©riels (qui se rattachent aux coÃ»ts &lt;em>Directs&lt;/em>) et ne pas prendre l&amp;rsquo;ensemble du pÃ©rimÃ¨tre financier, peut s&amp;rsquo;avÃ©rer contre-productif.&lt;/p>
&lt;h3 id="mettre-en-place-des-outils-des-procÃ©dures-des-formations">Mettre en place des outils, des procÃ©dures, des formations
&lt;/h3>&lt;p>Je conseille gÃ©nÃ©ralement de commencer par tout faire manuellement, que ce soit l&amp;rsquo;analyse des coÃ»ts dans le &lt;em>Cost Explorer&lt;/em>, la recherche des gÃ¢chis ou l&amp;rsquo;estimation des Ã©conomies possibles. Cela dans le but de vraiment comprendre comment les choses fonctionnent et de pouvoir repÃ©rer d&amp;rsquo;un coup d&amp;rsquo;oeil des axes d&amp;rsquo;amÃ©liorations une fois que l&amp;rsquo;habitude est faÃ®te.
Une fois rodÃ©, il est temps de mettre en place des procÃ©dures, et si possible des outils automatisÃ©s pour limiter les dÃ©rives dans le temps. L&amp;rsquo;automatisation des procÃ©dures de nettoyage et d&amp;rsquo;extinction des environnements en dehors des heures ouvrÃ©es sont des grands classiques, on trouve de nombreux exemples sur le net.
Comme Ã©voquÃ© plus haut, c&amp;rsquo;est Ã  ce niveau que les alertes de &lt;em>Budget&lt;/em> peuvent aussi apporter leurs aides, mÃªme si elles peuvent souvent s&amp;rsquo;avÃ©rer trop rigides (une pÃ©riode de soldes peut exploser les compteurs par rapport au mois d&amp;rsquo;avant, sans que cela soit inquiÃ©tant, bien au contraire).
Un volet Ã  ne pas nÃ©gliger Ã  cette Ã©tape (Ã  toutes en fait), est de former les Ã©quipes (chez soi ou chez son client), Ã  ce qu&amp;rsquo;est le &lt;em>FinOps&lt;/em>, ce qu&amp;rsquo;il apporte et sur les procÃ©dures en cours dans l&amp;rsquo;entreprise qui font partie de son processus.&lt;/p>
&lt;h3 id="architecturer-pour-rÃ©duire-les-coÃ»ts">Architecturer pour rÃ©duire les coÃ»ts
&lt;/h3>&lt;p>C&amp;rsquo;est la mÃ©thode la plus complexe, mais souvent la plus efficace et gratifiante, la refonte. Les &lt;em>Cloud Providers&lt;/em> sortent en permanence de nouvelles fonctionnalitÃ©s et nouveaux services, ce qui est impossible aujourd&amp;rsquo;hui ne le sera possiblement plus dans 1 ou 2 ans. IntÃ©grer le &lt;em>FinOps&lt;/em> lors de la conception d&amp;rsquo;une plateforme est important pour Ãªtre efficient, mais cela l&amp;rsquo;est encore plus lors des refontes, qui peuvent souvent Ãªtre dictÃ©es pour des raisons de rationalisation et/ou d&amp;rsquo;Ã©conomies. Cela est d&amp;rsquo;autant plus pertinent que vous avez alors une vraie expÃ©rience du comportement de votre plateforme, de ses besoins et contraintes.&lt;/p>
&lt;p>On peut envisager dans le cas d&amp;rsquo;une refonte de:&lt;/p>
&lt;ul>
&lt;li>migrer certaines fonctions dans &lt;em>Lambda&lt;/em>&lt;/li>
&lt;li>utiliser &lt;em>DynamoDB&lt;/em> en base &lt;em>NoSQL&lt;/em>&lt;/li>
&lt;li>utiliser des &lt;em>ALB&lt;/em> devant les &lt;em>Lambda&lt;/em> et non des &lt;em>API Gateway&lt;/em>&lt;/li>
&lt;/ul>
&lt;p>Il faut garder Ã  l&amp;rsquo;esprit encore une fois, que toutes les actions ont des coÃ»ts &lt;em>Indirects&lt;/em> (JH pour migrer le code d&amp;rsquo;une solution technique Ã  une autre, formations, etc), et peuvent vous &amp;ldquo;verrouiller&amp;rdquo; chez un &lt;em>Cloud Provider&lt;/em>, on touche lÃ , Ã  la politique de l&amp;rsquo;entreprise.&lt;/p>
&lt;h3 id="politiqes-de-scale-inout">Politiqes de Scale In/Out
&lt;/h3>&lt;p>La capacitÃ© d&amp;rsquo;adapter la flotte de machines Ã  la charge est une fonctionnalitÃ© de base, c&amp;rsquo;est presque la raison premiÃ¨re de l&amp;rsquo;existence du &lt;em>Cloud&lt;/em>. Avec le temps, que ce soit en natif ou via des fonctions externes, on peut piloter les groupes d&amp;rsquo;&lt;em>AutoScaling&lt;/em> pour faire beaucoup de choses comme:&lt;/p>
&lt;ul>
&lt;li>Retirer tout ou partie des machines en dehors des heures ouvrÃ©es&lt;/li>
&lt;li>Changer la taille des &lt;em>Instances&lt;/em> en fonction des pÃ©riodes&lt;/li>
&lt;li>&lt;em>Scale In/Out&lt;/em> (ajouter/retirer) en fonction de mÃ©triques mÃ©tiers et non juste le &lt;em>CPU&lt;/em> (qui est rarement une mÃ©trique pertinente, je le rappelle)&lt;/li>
&lt;/ul>
&lt;h3 id="rÃ©servations--saving-plans">RÃ©servations / Saving Plans
&lt;/h3>&lt;p>Si vous Ãªtes prÃªt Ã  vous engager sur du long terme (1 ou 3 ans), rÃ©server des ressources est le moyen le plus direct d&amp;rsquo;obtenir au moins 30% d&amp;rsquo;Ã©conomie (avec versement d&amp;rsquo;un account ou non) sur des services tels que:&lt;/p>
&lt;ul>
&lt;li>&lt;em>EC2&lt;/em>&lt;/li>
&lt;li>&lt;em>RDS&lt;/em>&lt;/li>
&lt;li>&lt;em>Elasticache&lt;/em>&lt;/li>
&lt;li>&lt;em>DynamoDB&lt;/em>&lt;/li>
&lt;/ul>
&lt;p>Les cas de &lt;em>DynamoDB&lt;/em> et &lt;em>Elasticache&lt;/em> sont un peu particulier, le premier demandant de rÃ©server des capacitÃ©s en &lt;em>Read/Write&lt;/em> et non des ressources &amp;ldquo;matÃ©rielles&amp;rdquo; et le second imposant un acompte dans tous les cas.&lt;/p>
&lt;p>Pour rappel, les rÃ©servations fonctionnent avec des unitÃ©s de temps, il ne s&amp;rsquo;agit pas de machines avec une Ã©tiquette Ã  son nom dans le datacenter &lt;em>AWS&lt;/em>.&lt;/p>
&lt;p>Prenons un exemple pour expliciter les choses.&lt;/p>
&lt;p>Imaginons que vous rÃ©serviez pour 1 an, pour de l&amp;rsquo;&lt;em>EC2&lt;/em>, 1 &lt;em>&amp;ldquo;Instance&amp;rdquo;&lt;/em> &lt;code>m5.xlarge&lt;/code>. Vous obtenez donc, 4 unitÃ©s (cf ce &lt;a class="link" href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/apply_ri.html" target="_blank" rel="noopener"
>tableau&lt;/a>) par mois dans la famille &lt;code>m5&lt;/code>. En prenant qu&amp;rsquo;un mois fait en moyenne 732h, vous aurez donc le droit au prix rÃ©duit pour:&lt;/p>
&lt;ul>
&lt;li>732h de &lt;code>m5.xlarge&lt;/code>&lt;/li>
&lt;li>1464h de &lt;code>m5.large&lt;/code> (soit 2 Instances)&lt;/li>
&lt;li>366h de &lt;code>m5.2xlarge&lt;/code> (soit 1 Instance allumÃ©e la moitiÃ© du mois)&lt;/li>
&lt;/ul>
&lt;p>Les unitÃ©s sont circonscrites Ã  une famille, c&amp;rsquo;est exactement le mÃªme cas pour les &lt;em>Saving Plans&lt;/em> de type &lt;em>EC2 Instance&lt;/em> (les Ã©conomies sont Ã  la virgule prÃ¨s les mÃªmes que pour les RÃ©servations). Si vous voulez ne pas Ãªtre contraint, et ne raisonner qu&amp;rsquo;en termes d&amp;rsquo;unitÃ©s de calcul et non de &amp;ldquo;famille&amp;rdquo;, les &lt;em>Saving Plans&lt;/em> de type &lt;em>Compute&lt;/em>, sont la nouvelle mÃ©thode pour procÃ©der Ã  des rÃ©servations chez &lt;em>AWS&lt;/em>, peu importe la famille ou le type. Les rÃ©ductions sur le &lt;em>Compute&lt;/em> s&amp;rsquo;appliquant peu importe le type, cela vous permet de changer de famille quand vous le souhaitez. Cela vient cependant avec une Ã©conomie moindre.&lt;/p>
&lt;h3 id="spot-instances">Spot Instances
&lt;/h3>&lt;p>&lt;em>AWS&lt;/em> met Ã  disposition son stock d&amp;rsquo;invendus (en quelque sorte) Ã  prix cassÃ© (jusqu&amp;rsquo;Ã  -70%), ce qu&amp;rsquo;ils appellent des &lt;em>Spot Instances&lt;/em>. Le principe est simple, vous dÃ©finissez un prix maximal pour lequel vous Ãªtes prÃªt Ã  payer, et tant que le prix courant est infÃ©rieur et qu&amp;rsquo;&lt;em>AWS&lt;/em> a du stock, vous Ãªtes susceptible d&amp;rsquo;avoir votre &lt;em>Instance&lt;/em>. Si un des critÃ¨res n&amp;rsquo;est plus respectÃ©, &lt;em>AWS&lt;/em> vous prÃ©vient 2min avant de vous retirer l&amp;rsquo;&lt;em>Instance&lt;/em>. Pour mitiger les risques, vous avez la possibilitÃ© de vous faire des flottes, c&amp;rsquo;est-Ã -dire des groupes d&amp;rsquo;&lt;em>Instances&lt;/em> de diffÃ©rents types.&lt;/p>
&lt;p>C&amp;rsquo;est un moyen extrÃªmement puissant pour faire des Ã©conomies, Ã  condition que l&amp;rsquo;usage que vous en faÃ®tes tolÃ¨re de perdre des noeuds, c&amp;rsquo;est donc trÃ¨s souvent utilisÃ© pour faire des tests au sein d&amp;rsquo;une &lt;em>CI&lt;/em>, par exemple.&lt;/p>
&lt;p>Un autre aspect Ã  prendre en compte et qui permet de limiter encore plus les risques, c&amp;rsquo;est de mixer des &lt;em>Instances&lt;/em> &lt;em>On-Demand&lt;/em> (payÃ©es au prix public annoncÃ©) et des &lt;em>Instances&lt;/em> &lt;em>Spot&lt;/em>. C&amp;rsquo;est dÃ©sormais possible avec les &lt;em>Launch Templates&lt;/em> qui dÃ©finissent comment doivent Ãªtre les &lt;em>Instances&lt;/em> d&amp;rsquo;un groupe d&amp;rsquo;&lt;em>Auto-Scaling&lt;/em>. Vous dÃ©finissez le nombre d&amp;rsquo;&lt;em>Instances&lt;/em> &lt;em>On-Demand&lt;/em> qui constitueront votre base, puis le pourcentage d&amp;rsquo;&lt;em>On-Demand&lt;/em> au dessus cette base par rapport aux &lt;em>Instances&lt;/em> &lt;em>Spot&lt;/em>. Si votre base &lt;em>On-Demand&lt;/em> correspond Ã  vos rÃ©servations, l&amp;rsquo;Ã©conomie est encore plus importante avec un risque contrÃ´lÃ©.&lt;/p>
&lt;h3 id="organisation-des-comptes">Organisation des comptes
&lt;/h3>&lt;p>La bonne pratique est d&amp;rsquo;isoler les environnements (prod, staging, etc) dans des comptes &lt;em>AWS&lt;/em> diffÃ©rents. Isoler les comptes les uns des autres permet, entre autres:&lt;/p>
&lt;ul>
&lt;li>d&amp;rsquo;assurer l&amp;rsquo;Ã©tanchÃ©itÃ© pour la sÃ©curitÃ©&lt;/li>
&lt;li>de bien sÃ©parer les coÃ»ts, ce qui facilite les analyses (un flux sortant est un flux sortant, &lt;em>AWS&lt;/em> ne vous dira pas de quelle &lt;em>VPC&lt;/em> prÃ©cisÃ©ment il vient, difficile de refacturer entre &lt;em>cost centers&lt;/em> dans ce cas)&lt;/li>
&lt;/ul>
&lt;p>A cÃ´tÃ© de cela il est trÃ¨s intÃ©ressant de regrouper tous ces comptes au sein d&amp;rsquo;une seule organisation, avec un compte payeur identifiÃ© (appelÃ© compte consolidant) et ne possÃ©dant aucune ressource (pour simplifier les analyses, de cette maniÃ¨re il n&amp;rsquo;apparaÃ®tra pas 2 fois, en tant que compte et compte consolidant).&lt;/p>
&lt;p>Il y a plusieurs avantages Ã  faire cela, le compte payeur agrÃ©geant la totalitÃ© de la facture:&lt;/p>
&lt;ul>
&lt;li>les rÃ©servations sont remontÃ©es au niveau du compte consolidant (sauf paramÃ©trage volontaire), ce qui implique que les unitÃ©s non utilisÃ©es d&amp;rsquo;un cÃ´tÃ© peuvent l&amp;rsquo;Ãªtre de l&amp;rsquo;autre, vous ne payez pas pour rien&lt;/li>
&lt;li>vous bÃ©nÃ©ficiez des tarifs sur les volumes (au sens de quantitÃ©), ce qu&amp;rsquo;on appelle les &lt;em>Blended Costs&lt;/em>.&lt;/li>
&lt;li>&lt;em>AWS&lt;/em> fournit une facture rÃ©capitulative de l&amp;rsquo;ensemble des frais, ce qui fera plaisir au service comptable qui n&amp;rsquo;aura pas Ã  gÃ©rer N pdf.&lt;/li>
&lt;/ul>
&lt;p>Les &lt;em>Blended Costs&lt;/em> sont une maniÃ¨re d&amp;rsquo;agrÃ©ger tous les volumes de certains services et de bÃ©nÃ©ficier ainsi des tranches de prix infÃ©rieures.&lt;/p>
&lt;p>Prenons comme exemple &lt;em>S3&lt;/em> pour expliciter la chose.&lt;/p>
&lt;blockquote>
&lt;p>Imaginons deux comptes liÃ©s A et B Ã  un compte consolidant Z.
Les usages S3 sont respectivement:&lt;/p>
&lt;ul>
&lt;li>50To en eu-west-3 pour le compte A&lt;/li>
&lt;li>30To en eu-west-3 pour le compte B&lt;/li>
&lt;/ul>
&lt;p>Si les comptes Ã©taient facturÃ©s sÃ©parÃ©ment, il devraient:&lt;/p>
&lt;ul>
&lt;li>compte A: &lt;code>40To x 0,024$/GB = $960&lt;/code>&lt;/li>
&lt;li>compte B: &lt;code>30To x 0,024$/GB = $720&lt;/code>&lt;/li>
&lt;li>total: &lt;code>$1680&lt;/code>&lt;/li>
&lt;/ul>
&lt;p>Avec les Blended Costs, le compte Z consolidant le tout paiera en fait:&lt;/p>
&lt;ul>
&lt;li>&lt;code>50To x 0,024$/GB + 20To x 0,023$/GB = $1620&lt;/code>&lt;/li>
&lt;/ul>
&lt;p>Le principe sous-jacent Ã©tant que pour S3, en eu-west-3, les 50 premiers To valent &lt;code>0,024$/GB&lt;/code> et &lt;code>0,023$/GB&lt;/code> au delÃ .&lt;/p>
&lt;p>On a donc une Ã©conomie de $60, sans aucune action autre qu&amp;rsquo;avoir liÃ© les comptes A et B Ã  Z.&lt;/p>&lt;/blockquote>
&lt;p>(voir &lt;a class="link" href="https://aws.amazon.com/fr/s3/pricing/" target="_blank" rel="noopener"
>ICI&lt;/a> pour les tarifs de &lt;em>S3&lt;/em>)&lt;/p>
&lt;h2 id="tags">Tags
&lt;/h2>&lt;p>On touche au nerf de la guerre, les &lt;em>Tags&lt;/em>. Il est essentiel pour comprendre les coÃ»ts, voire de les anticiper, de catÃ©goriser au maximum les choses, et cela passe par le tagging des ressources qui le peuvent (on ne peut pas tagger les flux rÃ©seau, par exemple).&lt;/p>
&lt;p>Voici quelques tags utiles:&lt;/p>
&lt;ul>
&lt;li>&lt;code>environnement&lt;/code>&lt;/li>
&lt;li>&lt;code>project&lt;/code>&lt;/li>
&lt;li>&lt;code>businessUnit&lt;/code>&lt;/li>
&lt;li>&lt;code>costCenter&lt;/code>&lt;/li>
&lt;li>&lt;code>scope&lt;/code>&lt;/li>
&lt;li>&lt;code>team&lt;/code>&lt;/li>
&lt;/ul>
&lt;p>Il y a un point trÃ¨s important Ã  savoir, les tags sont sensibles Ã  la casse au niveau des clÃ©s et des valeurs, il faut donc Ãªtre vigilant pour ne pas avoir des &lt;code>prod&lt;/code>, &lt;code>Prod&lt;/code>, &lt;code>production&lt;/code>, etc, qui reprÃ©sentent la mÃªme valeur mais crÃ©ent du bruit, voire peuvent cacher certaines ressources de vos rapports.&lt;/p>
&lt;p>Pour vous aider dans votre rattrapage, dans le cas oÃ¹ vous avez des ressources crÃ©Ã©es Ã  la main, &lt;em>AWS&lt;/em> fournit un outil au final assez mÃ©connu, le &lt;a class="link" href="https://docs.aws.amazon.com/ARG/latest/userguide/tag-editor.html" target="_blank" rel="noopener"
>&lt;em>Tag Editor&lt;/em>&lt;/a>.&lt;/p>
&lt;h2 id="conclusion">Conclusion
&lt;/h2>&lt;p>Cet article n&amp;rsquo;est finalement qu&amp;rsquo;une Ã©bauche de tout ce qu&amp;rsquo;on peut faire sans vraiment rentrer dans les dÃ©tails de comment on le fait. Il ne reprÃ©sente qu&amp;rsquo;une synthÃ¨se de mes rÃ©flexions, dont les conclusions sont sÃ»rement discutables (et peut-Ãªtre obsolÃ¨tes maintenant, le monde du &lt;em>Cloud&lt;/em> bougeant tellement vite). Vous avez sÃ»rement remarquÃ© qu&amp;rsquo;il y a un grand absent dans cet article, quid du &lt;em>FinOps&lt;/em> quand on utilise &lt;em>Kubernetes&lt;/em>? A l&amp;rsquo;Ã©poque oÃ¹ je faisais encore des audits &lt;em>FinOps&lt;/em>, bien qu&amp;rsquo;utilisant &lt;em>K8S&lt;/em> en production, je n&amp;rsquo;avais jamais eu Ã  creuser sÃ©rieusement la question. Je pense cependant que les principes gÃ©nÃ©raux que j&amp;rsquo;ai mentionnÃ©s peuvent s&amp;rsquo;appliquer en partie, dans le cas d&amp;rsquo;un environnement avec des ressources mutualisÃ©es comme l&amp;rsquo;est &lt;em>Kubernetes&lt;/em>.&lt;/p>
&lt;p>Merci d&amp;rsquo;avoir lu jusqu&amp;rsquo;au bout ce long article, et j&amp;rsquo;espÃ¨re qu&amp;rsquo;il aura Ã©tÃ© utile Ã  quelqu&amp;rsquo;un, il m&amp;rsquo;a au moins permis de sortir de ma tÃªte quelque chose qui y traÃ®nait depuis longtemps.&lt;/p>
&lt;p>&lt;em>Enjoy&lt;/em>&lt;/p></description></item><item><title>Falco: DÃ©tection et rÃ©action aux menaces dans Kubernetes</title><link>https://thomas.labarussias.fr/posts/cncf-meetup-paris-mars-2021/</link><pubDate>Tue, 06 Apr 2021 00:00:00 +0000</pubDate><guid>https://thomas.labarussias.fr/posts/cncf-meetup-paris-mars-2021/</guid><description>&lt;p>J&amp;rsquo;ai enregistrÃ© il y a quelques jours une prÃ©sentation traitant de &lt;code>falco&lt;/code> et &lt;code>falcosidekick&lt;/code> pour un Meetup CNCF Paris. J&amp;rsquo;y aborde ce que sont &lt;code>falco&lt;/code> et &lt;code>falcosidekick&lt;/code> et je montre comment on peut se servir des &lt;em>outputs&lt;/em> de &lt;code>falcosidekick&lt;/code> pour rÃ©agir en cas de dÃ©tection de comportements suspects.&lt;/p>
&lt;div class="video-wrapper">
&lt;iframe loading="lazy"
src="https://www.youtube.com/embed/UCXyHRhPbdg?start=2138"
allowfullscreen
title="YouTube Video"
>
&lt;/iframe>
&lt;/div>
&lt;p>&lt;em>Enjoy&lt;/em>&lt;/p></description></item><item><title>Monitorer son application Go en local</title><link>https://thomas.labarussias.fr/posts/monitorer-golang-app-local/</link><pubDate>Sat, 27 Jun 2020 00:00:00 +0000</pubDate><guid>https://thomas.labarussias.fr/posts/monitorer-golang-app-local/</guid><description>&lt;p>RÃ©cemment, aprÃ¨s plusieurs jours en production, nous avons dÃ©tectÃ© au boulot que notre pod &lt;a class="link" href="https://github.com/Issif/cercat" target="_blank" rel="noopener"
>Cercat&lt;/a> semblait avoir une &lt;em>memory leak&lt;/em>.&lt;/p>
&lt;p>Rien de complexe dans notre cas (ouf), cela a facilement Ã©tÃ© rÃ©glÃ© Ã  coup de &lt;em>profiles Go&lt;/em> mais une question s&amp;rsquo;est posÃ©e : &lt;em>&amp;ldquo;Aurais-je pu le dÃ©tecter avant d&amp;rsquo;envoyer en prod en sachant que l&amp;rsquo;Ã©volution de la consommation mÃ©moire Ã©tait relativement lente?&amp;rdquo;&lt;/em>&lt;/p>
&lt;p>&lt;img src="https://thomas.labarussias.fr/posts/monitorer-golang-app-local/img/cercat-memory-leak.png"
width="2824"
height="810"
srcset="https://thomas.labarussias.fr/posts/monitorer-golang-app-local/img/cercat-memory-leak_hu_27365a04d19f746e.png 480w, https://thomas.labarussias.fr/posts/monitorer-golang-app-local/img/cercat-memory-leak_hu_9c1aad5f94aeca9a.png 1024w"
loading="lazy"
alt="cercat memory leak"
class="gallery-image"
data-flex-grow="348"
data-flex-basis="836px"
>&lt;/p>
&lt;p>Je me suis donc mis en tÃªte d&amp;rsquo;avoir une solution clÃ© en main pour &lt;em>monitorer&lt;/em> en local une application &lt;em>Go&lt;/em> lors de son dÃ©veloppement.&lt;/p>
&lt;p>L&amp;rsquo;idÃ©e, trÃ¨s simple au final, est d&amp;rsquo;utiliser une instance de &lt;a class="link" href="https://github.com/netdata/netdata" target="_blank" rel="noopener"
>Netdata&lt;/a> dans un &lt;em>Docker&lt;/em> qui appelle l&amp;rsquo;endpoint &lt;em>expvar&lt;/em> de mon application &lt;em>Go&lt;/em>.&lt;/p>
&lt;p>Micro tuto pour comprendre le principe :&lt;/p>
&lt;ol>
&lt;li>
&lt;p>PrÃ©parer notre application&lt;/p>
&lt;p>Un micro code pour l&amp;rsquo;exemple :&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;expvar&amp;#34;&lt;/span> &lt;span class="c1">// package pour exposer les mÃ©triques Go par dÃ©faut et notre mÃ©trique custom&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;math/rand&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;net/http&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;time&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fake&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">expvar&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">NewFloat&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;custom.fake&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">// une mÃ©trique custom complÃ¨tement fausse &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">go&lt;/span> &lt;span class="nx">http&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ListenAndServe&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;:1111&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">nil&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">// on dÃ©marre un serveur http sur le port 1111&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="c1">// une boucle qui met Ã  jour alÃ©atoirement notre mÃ©trique custom&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fake&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Set&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="nx">rand&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Float64&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">5&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Sleep&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Duration&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">rand&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Intn&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Second&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Le code est commentÃ© pour comprendre Ã  quoi sert chaque ligne.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>On prÃ©pare la configuration de &lt;em>Netdata&lt;/em>&lt;/p>
&lt;p>&lt;code>go_expvar.conf&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">&amp;#39;golang-app&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name &lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;golang-app&amp;#39;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># le nom de notre app Go dans Netdata&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">url &lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;http://golang-app:1111/debug/vars&amp;#39;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># le port est Ã  adapter en fonction de l&amp;#39;application&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">collect_memstats&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># on active la collecte des mÃ©triques mÃ©moires&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">extra_charts&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># la collecte de notre mÃ©trique custom&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">id&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;custom&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">options&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">fake&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">title&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;custom&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">units&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">no&lt;/span>-&lt;span class="l">unit&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">family&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">custom&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">context&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">expvar.custom.fake&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">chart_type&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">line&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">lines&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- {&lt;span class="nt">expvar_key: &amp;#39;custom.fake&amp;#39;, expvar_type: float, id&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">custom_fake}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>python.d.conf&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">go_expvar&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">yes&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># active le monitoring des applications Go&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>On dÃ©marre le tout via &lt;em>docker-compose&lt;/em>&lt;/p>
&lt;p>&lt;code>docker-compose.yaml&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="nn">---&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">version&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;3&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">services&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">netdata&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">netdata/netdata:latest&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">container_name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">netdata&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ports&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;19999:19999&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">volumes&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;${PWD}/python.d.conf:/etc/netdata/python.d.conf:ro&amp;#34;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># pour activer le monitoring des applications GO&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;${PWD}/go_expvar.conf:/etc/netdata/python.d/go_expvar.conf:ro&amp;#34;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># pour configurer la collecte des mÃ©triques des applications Go&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;/etc/passwd:/host/etc/passwd:ro&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;/etc/group:/host/etc/group:ro&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;/proc:/host/proc:ro&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;/sys:/host/sys:ro&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;/var/run/docker.sock:/var/run/docker.sock:ro&amp;#34;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># pour moniter le Docker Go&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">cap_add&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">SYS_PTRACE&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">security_opt&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">apparmor:unconfined&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">golang-app&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">golang:alpine&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">container_name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">golang-app&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ports&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;1111:1111&amp;#34;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># le port d&amp;#39;Ã©coute de notre application, Ã  adapter&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">volumes&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;${PWD}:/app&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">working_dir&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">/app&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">command&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">go run main.go &lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># la commande pour lancer l&amp;#39;application, Ã  adapter&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Le plus important est d&amp;rsquo;adapter le port d&amp;rsquo;Ã©coute et la commande de dÃ©marrage en fonction de votre application.&lt;/p>
&lt;p>On dÃ©marre tout :&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">docker-compose -f docker-compose.yaml up -d
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>On vÃ©rifie que tout est bien dÃ©marrÃ© :&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">$ docker ps
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">5f9a07fa2e1f netdata/netdata:latest &lt;span class="s2">&amp;#34;/usr/sbin/run.sh&amp;#34;&lt;/span> About a minute ago Up About a minute &lt;span class="o">(&lt;/span>healthy&lt;span class="o">)&lt;/span> 0.0.0.0:19999-&amp;gt;19999/tcp netdata
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">4e9d30d12bec golang:alpine &lt;span class="s2">&amp;#34;go run main.go&amp;#34;&lt;/span> &lt;span class="m">5&lt;/span> days ago Up About a minute 0.0.0.0:1111-&amp;gt;1111/tcp golang-app
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>L&amp;rsquo;instance &lt;em>Netdata&lt;/em> est accessible via &lt;a class="link" href="http://localhost:19999" target="_blank" rel="noopener"
>http://localhost:19999&lt;/a>.&lt;/p>
&lt;p>AprÃ¨s quelques secondes on obtient nos mÃ©triques.&lt;/p>
&lt;p>Les mÃ©triques du container de notre application :&lt;/p>
&lt;p>&lt;img src="https://thomas.labarussias.fr/posts/monitorer-golang-app-local/img/netdata_golang_1.png"
width="1905"
height="955"
srcset="https://thomas.labarussias.fr/posts/monitorer-golang-app-local/img/netdata_golang_1_hu_fa1decc4d9877a2d.png 480w, https://thomas.labarussias.fr/posts/monitorer-golang-app-local/img/netdata_golang_1_hu_1a5f983d30a84422.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="199"
data-flex-basis="478px"
>&lt;/p>
&lt;p>Les mÃ©triques &lt;em>expvar&lt;/em> de notre application :&lt;/p>
&lt;p>&lt;img src="https://thomas.labarussias.fr/posts/monitorer-golang-app-local/img/netdata_golang_2.png"
width="1905"
height="955"
srcset="https://thomas.labarussias.fr/posts/monitorer-golang-app-local/img/netdata_golang_2_hu_10d2d6280e24b459.png 480w, https://thomas.labarussias.fr/posts/monitorer-golang-app-local/img/netdata_golang_2_hu_303e4769fa03052e.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="199"
data-flex-basis="478px"
>&lt;/p>
&lt;p>Notre mÃ©trique custom :&lt;/p>
&lt;p>&lt;img src="https://thomas.labarussias.fr/posts/monitorer-golang-app-local/img/netdata_golang_3.png"
width="1633"
height="271"
srcset="https://thomas.labarussias.fr/posts/monitorer-golang-app-local/img/netdata_golang_3_hu_a78367bdbcab9fb7.png 480w, https://thomas.labarussias.fr/posts/monitorer-golang-app-local/img/netdata_golang_3_hu_2023c332bd113883.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="602"
data-flex-basis="1446px"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Mettre Ã  jour notre application&lt;/p>
&lt;p>C&amp;rsquo;est trÃ¨s simple, il suffit de redÃ©marrer le container &lt;em>Go&lt;/em> :&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">$ docker restart 4e9d30d12bec
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ol>
&lt;p>&lt;em>Enjoy&lt;/em>&lt;/p></description></item><item><title>Cercat</title><link>https://thomas.labarussias.fr/posts/cercat/</link><pubDate>Fri, 17 Apr 2020 00:00:00 +0000</pubDate><guid>https://thomas.labarussias.fr/posts/cercat/</guid><description>&lt;p>En cette pÃ©riode de confinement, les &lt;em>phishers&lt;/em> s&amp;rsquo;en donnent Ã  coeur joie. La question qui se pose alors est : &lt;strong>Comment les dÃ©tecter le plus tÃ´t possible?&lt;/strong>&lt;/p>
&lt;p>Comme les sites de &lt;em>phishing&lt;/em> servent souvent Ã  rÃ©cupÃ©rer des donnÃ©es confidentielles (nÂ° de carte, mots de passe, etc), ils profitent de toutes les mÃ©thodes rÃ©centes pour rÃ©cupÃ©rer des certificats gratuits afin de se donner une belle image avec un joli cadenas dans la barre d&amp;rsquo;URL.&lt;/p>
&lt;p>Quelques recherches sur ce sujet m&amp;rsquo;a fait dÃ©couvrir un superbe projet de chez &lt;strong>Calidog&lt;/strong> : &lt;a class="link" href="https://certstream.calidog.io/" target="_blank" rel="noopener"
>&lt;strong>CertStream&lt;/strong>&lt;/a>. Ils mettent Ã  disposition un flux donnant en temps rÃ©el les certificats Ã©mis par &lt;em>Let&amp;rsquo;s Encrypt&lt;/em>, &lt;em>Cloudflare&lt;/em>, &lt;em>AWS&lt;/em>, &amp;hellip;&lt;/p>
&lt;p>Il ne reste plus qu&amp;rsquo;Ã  s&amp;rsquo;y connecter, faire une correspondance des domaines avec une &lt;em>regexp&lt;/em> pour avoir en temps rÃ©el, les possibles sites de &lt;em>phishing&lt;/em>.&lt;/p>
&lt;p>D&amp;rsquo;autres ont eu la mÃªme idÃ©e : &lt;a class="link" href="https://github.com/AssuranceMaladieSec/CertStreamMonitor" target="_blank" rel="noopener"
>&lt;strong>CertStreamMonitor&lt;/strong>&lt;/a> mais les performances m&amp;rsquo;ont dÃ©Ã§u (100% d&amp;rsquo;utilisation permanente d&amp;rsquo;un CORE) et j&amp;rsquo;ai trouvÃ© intÃ©ressant de le faire moi-mÃªme.&lt;/p>
&lt;p>Je vous prÃ©sente donc &lt;strong>&lt;a class="link" href="https://github.com/Issif/cercat" target="_blank" rel="noopener"
>Cercat&lt;/a>&lt;/strong> aka &lt;em>Certificate Catcher&lt;/em>.&lt;/p>
&lt;p>Le principe est simple, le service se connecte via &lt;em>websocket&lt;/em> au &lt;em>stream&lt;/em> de &lt;strong>Certstream&lt;/strong>, compare le domaine certifiÃ© Ã  une &lt;em>regexp&lt;/em> et si il y a correspondance, un message est postÃ© sur &lt;strong>Slack&lt;/strong> :&lt;/p>
&lt;p>&lt;img src="https://raw.githubusercontent.com/issif/cercat/master/screenshot.png"
loading="lazy"
alt="Certcat slack screenshot"
>&lt;/p>
&lt;p>et dans les logs :&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">2020/04/14 17:29:40 [INFO] : A certificate for &amp;#39;www.XXXX.fr&amp;#39; has been issued : {&amp;#34;domain&amp;#34;:&amp;#34;www.XXXX.fr&amp;#34;,&amp;#34;SAN&amp;#34;:[&amp;#34;www.XXXX.fr&amp;#34;],&amp;#34;issuer&amp;#34;:&amp;#34;Let&amp;#39;s Encrypt&amp;#34;,&amp;#34;Addresses&amp;#34;:[&amp;#34;XX.XX.XX.183&amp;#34;,&amp;#34;XX.XX.XX.182&amp;#34;]}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2020/04/14 17:29:41 [INFO] : A certificate for &amp;#39;XXXX.fr&amp;#39; has been issued : {&amp;#34;domain&amp;#34;:&amp;#34;XXXX.fr&amp;#34;,&amp;#34;SAN&amp;#34;:[&amp;#34;mail.XXXX.fr&amp;#34;,&amp;#34;XXXX.fr&amp;#34;,&amp;#34;www.XXXX.fr&amp;#34;],&amp;#34;issuer&amp;#34;:&amp;#34;Let&amp;#39;s Encrypt&amp;#34;,&amp;#34;Addresses&amp;#34;:[&amp;#34;XX.XX.XX.108&amp;#34;]}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>La configuration est dans le &lt;a class="link" href="https://github.com/Issif/cercat/blob/master/README.md" target="_blank" rel="noopener"
>README&lt;/a> et des binaires prÃ©-compilÃ©s sont fournis &lt;a class="link" href="https://github.com/Issif/cercat/releases" target="_blank" rel="noopener"
>ICI&lt;/a> parce que je suis gentil.&lt;/p>
&lt;p>En faisant des tests sur les domaines en &lt;code>.fr&lt;/code> je suis d&amp;rsquo;ailleurs tombÃ© sur Ã§a, un bel exemple de &lt;em>phishing&lt;/em> :&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-json" data-lang="json">&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;domain&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="s2">&amp;#34;google-france.fr&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;SAN&amp;#34;&lt;/span>&lt;span class="p">:[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;eset.fr.nf&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;google-france.fr&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;page-accueil.info&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;www.eset.fr.nf&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;www.google-france.fr&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;www.page-accueil.info&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;issuer&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="s2">&amp;#34;Let&amp;#39;s Encrypt&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;Addresses&amp;#34;&lt;/span>&lt;span class="p">:[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;X.X.X.24&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>En espÃ©rant que Ã§a serve Ã  d&amp;rsquo;autres.&lt;/p>
&lt;p>&lt;em>Enjoy&lt;/em>&lt;/p></description></item><item><title>Falcosidekick 100k Pulls</title><link>https://thomas.labarussias.fr/posts/falcosidekick-100k-pulls/</link><pubDate>Tue, 18 Feb 2020 00:00:00 +0000</pubDate><guid>https://thomas.labarussias.fr/posts/falcosidekick-100k-pulls/</guid><description>&lt;p>Un petit post d&amp;rsquo;auto-promo (aprÃ¨s des mois d&amp;rsquo;absences&amp;hellip;).&lt;/p>
&lt;p>J&amp;rsquo;ai notÃ© rÃ©cemment que mon petit &lt;code>falcosidekick&lt;/code> a dÃ©passÃ© les &lt;em>100000 pulls&lt;/em> sur le &lt;code>DockerHub&lt;/code>. Je suis bluffÃ©, surtout que je sais que des entitÃ©s grosses et connues l&amp;rsquo;utilisent (je ne sais pas si je peux dire qui, donc je me tais, &lt;em>sorry&lt;/em>).&lt;/p>
&lt;p>Un petit graphe pour montrer l&amp;rsquo;historique (la lÃ©gende est illisible, mais les dates sont obtenables en survolant) :&lt;/p>
&lt;div>
&lt;svg class='line'>&lt;/svg>
&lt;script src="https://cdn.jsdelivr.net/npm/chart.xkcd@1/dist/chart.xkcd.min.js">&lt;/script>
&lt;script>
const svgline = document.querySelector('.line');
new chartXkcd.Line(svgline, {
title: 'Docker Pulls',
xLabel: 'Pulls',
yLabel: 'Date',
data: {
labels:['2019-08-28','2019-08-29','2019-08-30','2019-08-31','2019-09-01','2019-09-02','2019-09-03','2019-09-04','2019-09-05','2019-09-06','2019-09-07','2019-09-08','2019-09-09','2019-09-10','2019-09-11','2019-09-12','2019-09-13','2019-09-14','2019-09-15','2019-09-16','2019-09-17','2019-09-18','2019-09-19','2019-09-20','2019-09-21','2019-09-22','2019-09-23','2019-09-24','2019-09-25','2019-09-26','2019-09-27','2019-09-28','2019-09-29','2019-09-30','2019-10-01','2019-10-02','2019-10-03','2019-10-04','2019-10-05','2019-10-06','2019-10-07','2019-10-08','2019-10-09','2019-10-10','2019-10-11','2019-10-12','2019-10-13','2019-10-14','2019-10-15','2019-10-16','2019-10-17','2019-10-18','2019-10-19','2019-10-20','2019-10-21','2019-10-22','2019-10-23','2019-10-24','2019-10-25','2019-10-26','2019-10-27','2019-10-28','2019-10-29','2019-10-30','2019-10-31','2019-11-01','2019-11-02','2019-11-03','2019-11-04','2019-11-05','2019-11-06','2019-11-07','2019-11-08','2019-11-09','2019-11-10','2019-11-11','2019-11-12','2019-11-13','2019-11-14','2019-11-15','2019-11-16','2019-11-17','2019-11-18','2019-11-19','2019-11-20','2019-11-21','2019-11-22','2019-11-23','2019-11-24','2019-11-25','2019-11-26','2019-11-27','2019-11-28','2019-11-29','2019-11-30','2019-12-01','2019-12-02','2019-12-03','2019-12-04','2019-12-05','2019-12-06','2019-12-07','2019-12-08','2019-12-09','2019-12-10','2019-12-11','2019-12-12','2019-12-13','2019-12-14','2019-12-15','2019-12-16','2019-12-17','2019-12-18','2019-12-19','2019-12-20','2019-12-21','2019-12-22','2019-12-23','2019-12-24','2019-12-25','2019-12-26','2019-12-27','2019-12-28','2019-12-29','2019-12-30','2019-12-31','2020-01-01','2020-01-02','2020-01-03','2020-01-04','2020-01-05','2020-01-06','2020-01-07','2020-01-08','2020-01-09','2020-01-10','2020-01-11','2020-01-12','2020-01-13','2020-01-14','2020-01-15','2020-01-16','2020-01-17','2020-01-18','2020-01-19','2020-01-20','2020-01-21','2020-01-22','2020-01-23','2020-01-24','2020-01-25','2020-01-26','2020-01-27','2020-01-28','2020-01-29','2020-01-30','2020-01-31','2020-02-01','2020-02-02','2020-02-03','2020-02-04','2020-02-05','2020-02-06','2020-02-07','2020-02-08','2020-02-09','2020-02-10','2020-02-11','2020-02-12','2020-02-13','2020-02-14','2020-02-15','2020-02-16','2020-02-17','2020-02-18'],
datasets: [{
label: 'Pulls',
data: [2,2,9,106,108,134,173,434,492,615,761,761,816,950,1084,1104,1111,1111,1111,1157,1194,1210,1232,1232,1232,1232,1235,7685,7988,8042,8086,8086,8086,8087,8188,8200,8250,8373,8401,8408,8409,8524,8532,8603,8659,8707,8707,8771,8842,8992,9467,9713,9995,10255,10572,10903,10986,11041,11467,12042,12206,12277,12380,12470,12490,12642,12707,12783,13239,13754,14426,15159,15837,16155,16292,16776,17425,18001,18931,19596,20055,20321,20694,21490,22307,23572,24904,25591,25738,26321,27371,28516,29413,30216,30967,31052,31591,32710,34168,35164,35858,36239,36536,36849,37305,39011,40333,41472,42265,42508,43081,44534,45853,47028,47575,47880,47884,48428,48877,48882,49219,49683,49784,49786,49981,50538,50625,50860,51338,51413,51419,51501,51809,52676,53759,54978,55761,55828,56622,58214,59431,60331,62154,63643,64460,65872,67662,69453,71212,73267,74537,75335,76767,79124,81637,83863,86340,87692,88663,89862,91420,92794,94149,95124,95836,96571,97335,98296,99070,99906,100752,101480,102182,102885,103582],
}]
},
options: { // optional
yTickCount: 20,
}
});
&lt;/script>
&lt;/div>
&lt;p>Merci Ã  tous ceux qui l&amp;rsquo;utilisent et bien sÃ»r Ã  toute l&amp;rsquo;Ã©quipe derriÃ¨re &lt;code>falco&lt;/code>. J&amp;rsquo;ai d&amp;rsquo;autres idÃ©es en rÃ©serve pour amÃ©liorer, j&amp;rsquo;espÃ¨re avoir le temps de m&amp;rsquo;y atteler.&lt;/p>
&lt;p>&lt;em>Enjoy&lt;/em>&lt;/p></description></item><item><title>Falcosidekick 2.9.0 : nouvelle intÃ©gration et nouvel avatar</title><link>https://thomas.labarussias.fr/posts/falcosidekick-v-2-9-0-new-avatar/</link><pubDate>Sat, 05 Oct 2019 00:00:00 +0000</pubDate><guid>https://thomas.labarussias.fr/posts/falcosidekick-v-2-9-0-new-avatar/</guid><description>&lt;p>Je viens de sortir la version &lt;a class="link" href="https://github.com/falcosecurity/falcosidekick/releases/tag/2.9.0" target="_blank" rel="noopener"
>&lt;strong>2.9.0&lt;/strong>&lt;/a> de &lt;strong>falcosidekick&lt;/strong> et en outre un nouvel output, &lt;a class="link" href="https://www.opsgenie.com/" target="_blank" rel="noopener"
>&lt;strong>Opsgenie&lt;/strong>&lt;/a>, j&amp;rsquo;ai Ã©galement refait l&amp;rsquo;avatar du projet. Il est dÃ©sormais en couleurs et a une forme globale carrÃ©e, pour faciliter l&amp;rsquo;utilisation en icÃ´ne (&lt;strong>Slack&lt;/strong>, &lt;strong>Teams&lt;/strong>, &amp;hellip;).&lt;/p>
&lt;p>VoilÃ  le rÃ©sultat :&lt;/p>
&lt;p>&lt;img src="https://raw.githubusercontent.com/falcosecurity/falcosidekick/master/imgs/falcosidekick_color.png"
loading="lazy"
alt="falcosidekick new avatar"
>&lt;/p>
&lt;p>Ce qui donne ceci dans &lt;strong>Slack&lt;/strong> :&lt;/p>
&lt;p>&lt;img src="https://thomas.labarussias.fr/posts/falcosidekick-v-2-9-0-new-avatar/img/slack_with_new_falcosidekick_avatar.png"
width="794"
height="374"
srcset="https://thomas.labarussias.fr/posts/falcosidekick-v-2-9-0-new-avatar/img/slack_with_new_falcosidekick_avatar_hu_70021afb819a63fb.png 480w, https://thomas.labarussias.fr/posts/falcosidekick-v-2-9-0-new-avatar/img/slack_with_new_falcosidekick_avatar_hu_1228d059614975b2.png 1024w"
loading="lazy"
alt="slack avec le nouvel avatar"
class="gallery-image"
data-flex-grow="212"
data-flex-basis="509px"
>&lt;/p>
&lt;p>En ce qui concerne &lt;a class="link" href="https://www.opsgenie.com/" target="_blank" rel="noopener"
>&lt;strong>Opsgenie&lt;/strong>&lt;/a>, voilÃ  le rÃ©sultat :&lt;/p>
&lt;p>&lt;img src="https://raw.githubusercontent.com/falcosecurity/falcosidekick/master/docs/outputs/images/opsgenie.png"
loading="lazy"
alt="OpeGenie"
>&lt;/p>
&lt;p>Le repo &lt;a class="link" href="https://github.com/falcosecurity/falcosidekick" target="_blank" rel="noopener"
>Github&lt;/a> et l&amp;rsquo;image sur le &lt;a class="link" href="https://hub.docker.com/r/falcosecurity/falcosidekick/" target="_blank" rel="noopener"
>DockerHub&lt;/a>.&lt;/p>
&lt;p>&lt;em>Enjoy&lt;/em>&lt;/p></description></item><item><title>Falco Probes</title><link>https://thomas.labarussias.fr/posts/falco-probes/</link><pubDate>Mon, 23 Sep 2019 00:00:00 +0000</pubDate><guid>https://thomas.labarussias.fr/posts/falco-probes/</guid><description>&lt;p>Je traÃ®ne pas mal sur le &lt;strong>slack&lt;/strong> de &lt;a class="link" href="https://sysdig.slack.com/" target="_blank" rel="noopener"
>&lt;strong>sysdig&lt;/strong>&lt;/a>, oÃ¹ on parle bien entendu de &lt;strong>falco&lt;/strong>. Un problÃ¨me trÃ¨s rÃ©current des utilisateurs est l&amp;rsquo;existence ou non de modules &lt;em>kernel&lt;/em> prÃ©compilÃ©s pour leurs versions de &lt;em>kernel&lt;/em>.&lt;/p>
&lt;p>Quand le module n&amp;rsquo;est pas prÃ©sent sur la machine hÃ´te, l&amp;rsquo;installeur tente de le tÃ©lÃ©charger depuis un &lt;em>bucket S3&lt;/em>, c&amp;rsquo;est pratique, mais Ã©tant donnÃ© l&amp;rsquo;immense variÃ©tÃ© d&amp;rsquo;architectures et de versions de &lt;em>kernel&lt;/em> dans la nature, impossible de tous les avoir tout prÃªts au chaud sur &lt;em>S3&lt;/em>. Jusqu&amp;rsquo;Ã  prÃ©sent, la seule maniÃ¨re pour savoir si la version du module pour son &lt;em>kernel&lt;/em> est prÃ©sente ou non sur le &lt;em>bucket&lt;/em> est d&amp;rsquo;aller sur la page indigeste qui est celle-ci : &lt;a class="link" href="https://s3.amazonaws.com/download.draios.com/stable/sysdig-probe-binaries/index.html" target="_blank" rel="noopener"
>https://s3.amazonaws.com/download.draios.com/stable/sysdig-probe-binaries/index.html&lt;/a>&lt;/p>
&lt;p>Pas trÃ¨s pratique (Ã§a oblige Ã  faire du &lt;em>ctrl+F&lt;/em> pour recherhcer) et surtout la page est de plus en plus volumineuse.&lt;/p>
&lt;p>J&amp;rsquo;ai donc codÃ© un petit machin qui parse cet &lt;em>index&lt;/em> et ressort le tout sous forme de tableaux dans lequels on peut chercher et Ã©galement transmettre les diens vers les modules.&lt;/p>
&lt;p>Le domaine est temporaire jusqu&amp;rsquo;Ã  nouvel ordre : &lt;strong>&lt;a class="link" href="https://thomas.labarussias.fr/falco-probes/?falcoversion=0.17.0" target="_blank" rel="noopener"
>https://thomas.labarussias.fr/falco-probes/?falcoversion=0.17.0&lt;/a>&lt;/strong>&lt;/p>
&lt;p>En espÃ©rant que Ã§a serve Ã  quelqu&amp;rsquo;un d&amp;rsquo;autre que moi, en tout cas c&amp;rsquo;est trÃ¨s pratique pour vÃ©rifier si les soucis d&amp;rsquo;installation de &lt;strong>falco&lt;/strong> d&amp;rsquo;une personne viennent de l&amp;rsquo;absence du module ou non.&lt;/p>
&lt;p>&lt;em>Enjoy&lt;/em>&lt;/p></description></item><item><title>Chart XKCD</title><link>https://thomas.labarussias.fr/posts/chart-xkcd/</link><pubDate>Thu, 12 Sep 2019 00:00:00 +0000</pubDate><guid>https://thomas.labarussias.fr/posts/chart-xkcd/</guid><description>&lt;p>Je suis tombÃ© &lt;a class="link" href="https://github.com/timqian/chart.xkcd" target="_blank" rel="noopener"
>chart.xkcd&lt;/a> parmi les flux RSS que je suis. J&amp;rsquo;ai trouvÃ© l&amp;rsquo;idÃ©e amusante et le rendu agrÃ©able, j&amp;rsquo;en ai donc fait un micro &lt;em>shortcode&lt;/em> pour &lt;strong>Hugo&lt;/strong> :&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">div&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">svg&lt;/span> &lt;span class="na">class&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#39;{{ .Get &amp;#34;name&amp;#34; }}&amp;#39;&lt;/span>&lt;span class="p">&amp;gt;&amp;lt;/&lt;/span>&lt;span class="nt">svg&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">script&lt;/span> &lt;span class="na">src&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;https://cdn.jsdelivr.net/npm/chart.xkcd@1/dist/chart.xkcd.min.js&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&amp;lt;/&lt;/span>&lt;span class="nt">script&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">script&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">svg&lt;/span>&lt;span class="p">{{&lt;/span> &lt;span class="p">.&lt;/span>&lt;span class="nx">Get&lt;/span> &lt;span class="s2">&amp;#34;name&amp;#34;&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="nx">safeJS&lt;/span> &lt;span class="p">}}&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">document&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">querySelector&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;.{{ .Get &amp;#34;name&amp;#34; }}&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">new&lt;/span> &lt;span class="nx">chartXkcd&lt;/span>&lt;span class="p">.{{&lt;/span> &lt;span class="p">.&lt;/span>&lt;span class="nx">Get&lt;/span> &lt;span class="s2">&amp;#34;type&amp;#34;&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="nx">safeJS&lt;/span> &lt;span class="p">}}(&lt;/span>&lt;span class="nx">svg&lt;/span>&lt;span class="p">{{&lt;/span> &lt;span class="p">.&lt;/span>&lt;span class="nx">Get&lt;/span> &lt;span class="s2">&amp;#34;name&amp;#34;&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="nx">safeJS&lt;/span> &lt;span class="p">}},&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{{&lt;/span> &lt;span class="p">.&lt;/span>&lt;span class="nx">Inner&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="nx">safeJS&lt;/span> &lt;span class="p">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">});&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">script&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">div&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>A caler dans &lt;code>layout/shortcodes/chart-xkcd.html&lt;/code>.&lt;/p>
&lt;p>Trois types de diagrammes sont dispos pour le moment : &lt;a class="link" href="#line" >&lt;strong>Line&lt;/strong>&lt;/a>, &lt;a class="link" href="#pie" >&lt;strong>Pie&lt;/strong>&lt;/a>, &lt;a class="link" href="#bar" >&lt;strong>Bar&lt;/strong>&lt;/a>, &lt;a class="link" href="#xy" >&lt;strong>XY&lt;/strong>&lt;/a>, &lt;a class="link" href="#radar" >&lt;strong>Radar&lt;/strong>&lt;/a>.&lt;/p>
&lt;p>Les options de chaque diagramme sont trouvables dans la &lt;a class="link" href="https://timqian.com/chart.xkcd/" target="_blank" rel="noopener"
>doc&lt;/a>.&lt;/p>
&lt;h2 id="exemples">Exemples
&lt;/h2>&lt;h3 id="line">Line
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="line">&lt;span class="cl">&lt;span class="p">{{&lt;/span>&lt;span class="o">&amp;lt;&lt;/span> &lt;span class="nx">chart&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">xkcd&lt;/span> &lt;span class="nx">name&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;line&amp;#34;&lt;/span> &lt;span class="nx">type&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;Line&amp;#34;&lt;/span> &lt;span class="o">&amp;gt;&lt;/span>&lt;span class="p">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">title&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s1">&amp;#39;A vs B&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">xLabel&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s1">&amp;#39;Abscisse&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">yLabel&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s1">&amp;#39;Ordonnee&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">data&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">labels&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;1&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;2&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;3&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;4&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;5&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;6&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;7&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;8&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;9&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;10&amp;#39;&lt;/span>&lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">datasets&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">[{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">label&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s1">&amp;#39;A&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">data&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="mi">30&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">2500&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">200&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">300&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">250&lt;/span> &lt;span class="p">,&lt;/span>&lt;span class="mi">800&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">1500&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">2900&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">5000&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">800&lt;/span>&lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">label&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s1">&amp;#39;B&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">data&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">30&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">70&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">80&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">100&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">50&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">80&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">40&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">150&lt;/span>&lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">options&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="c1">// optional
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">yTickCount&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{{&lt;/span>&lt;span class="o">&amp;lt;&lt;/span> &lt;span class="err">/chart-xkcd &amp;gt;}}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div>
&lt;svg class='line'>&lt;/svg>
&lt;script src="https://cdn.jsdelivr.net/npm/chart.xkcd@1/dist/chart.xkcd.min.js">&lt;/script>
&lt;script>
const svgline = document.querySelector('.line');
new chartXkcd.Line(svgline, {
title: 'A vs B',
xLabel: 'Abscisse',
yLabel: 'Ordonnee',
data: {
labels:['1', '2', '3', '4', '5', '6','7', '8', '9', '10'],
datasets: [{
label: 'A',
data: [30, 2500, 200, 300, 250 ,800, 1500, 2900, 5000, 800],
}, {
label: 'B',
data: [0, 145, 300, 770, 80, 45, 50, 1080, 40, 150],
}]
},
options: {
yTickCount: 10,
}
});
&lt;/script>
&lt;/div>
&lt;h3 id="pie">Pie
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="line">&lt;span class="cl">&lt;span class="p">{{&lt;/span>&lt;span class="o">&amp;lt;&lt;/span> &lt;span class="nx">chart&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">xkcd&lt;/span> &lt;span class="nx">name&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;pie&amp;#34;&lt;/span> &lt;span class="nx">type&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;Pie&amp;#34;&lt;/span> &lt;span class="o">&amp;gt;&lt;/span>&lt;span class="p">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">title&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s1">&amp;#39;A B C D E&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">data&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">labels&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="p">[&lt;/span> &lt;span class="s1">&amp;#39;A&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;B&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;C&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;D&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;E&amp;#39;&lt;/span>&lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">datasets&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">[{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">data&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="mi">200&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">122&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">60&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">130&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">44&lt;/span>&lt;span class="p">,],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">options&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">innerRadius&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="mf">0.5&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="c1">// mettre Ã  0 pour obtenir un diagramme camembert (pie chart)
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">legendPosition&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="nx">chartXkcd&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">config&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">positionType&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">upRight&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{{&lt;/span>&lt;span class="o">&amp;lt;&lt;/span> &lt;span class="err">/chart-xkcd &amp;gt;}}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div>
&lt;svg class='pie'>&lt;/svg>
&lt;script src="https://cdn.jsdelivr.net/npm/chart.xkcd@1/dist/chart.xkcd.min.js">&lt;/script>
&lt;script>
const svgpie = document.querySelector('.pie');
new chartXkcd.Pie(svgpie, {
title: 'A B C D E',
data: {
labels:[ 'A', 'B', 'C', 'D', 'E'],
datasets: [{
data: [200, 122, 60, 130, 44,],
}]
},
options: {
innerRadius: 0.5,
legendPosition: chartXkcd.config.positionType.upRight,
}
});
&lt;/script>
&lt;/div>
&lt;h3 id="bar">Bar
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="line">&lt;span class="cl">&lt;span class="p">{{&lt;/span>&lt;span class="o">&amp;lt;&lt;/span> &lt;span class="nx">chart&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">xkcd&lt;/span> &lt;span class="nx">name&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;bar&amp;#34;&lt;/span> &lt;span class="nx">type&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;Bar&amp;#34;&lt;/span> &lt;span class="o">&amp;gt;&lt;/span>&lt;span class="p">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">title&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;A B C D&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">data&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">labels&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;A&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;B&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;C&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;D&amp;#39;&lt;/span>&lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">datasets&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">[{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">data&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="mi">20&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">33&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">5&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">12&lt;/span>&lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">options&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="c1">// optional
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">yTickCount&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="mi">8&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{{&lt;/span>&lt;span class="o">&amp;lt;&lt;/span> &lt;span class="err">/chart-xkcd &amp;gt;}}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div>
&lt;svg class='bar'>&lt;/svg>
&lt;script src="https://cdn.jsdelivr.net/npm/chart.xkcd@1/dist/chart.xkcd.min.js">&lt;/script>
&lt;script>
const svgbar = document.querySelector('.bar');
new chartXkcd.Bar(svgbar, {
title: "A B C D",
data: {
labels:['A', 'B', 'C', 'D'],
datasets: [{
data: [20, 33, 5, 12],
}]
},
options: { // optional
yTickCount: 8,
}
});
&lt;/script>
&lt;/div>
&lt;h3 id="xy">XY
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="line">&lt;span class="cl">&lt;span class="p">{{&lt;/span>&lt;span class="o">&amp;lt;&lt;/span> &lt;span class="nx">chart&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">xkcd&lt;/span> &lt;span class="nx">name&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;xy&amp;#34;&lt;/span> &lt;span class="nx">type&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;XY&amp;#34;&lt;/span> &lt;span class="o">&amp;gt;&lt;/span>&lt;span class="p">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">title&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s1">&amp;#39;A vs B&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">xLabel&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s1">&amp;#39;Abscisse&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">yLabel&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s1">&amp;#39;Ordonnee&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">data&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">datasets&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">[{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">label&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s1">&amp;#39;A&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">data&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">[{&lt;/span> &lt;span class="nx">x&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">y&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="mi">30&lt;/span> &lt;span class="p">},&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="nx">x&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">y&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="mi">8&lt;/span> &lt;span class="p">},&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="nx">x&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="mi">5&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">y&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="mi">45&lt;/span> &lt;span class="p">},&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="nx">x&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="mi">7&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">y&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="mi">22&lt;/span> &lt;span class="p">},&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="nx">x&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="mi">9&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">y&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="mi">4&lt;/span> &lt;span class="p">}],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">label&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s1">&amp;#39;B&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">data&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">[{&lt;/span> &lt;span class="nx">x&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">y&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="mi">12&lt;/span> &lt;span class="p">},&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="nx">x&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">y&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="mi">20&lt;/span> &lt;span class="p">},&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="nx">x&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="mi">6&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">y&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="mi">53&lt;/span> &lt;span class="p">},&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="nx">x&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="mi">8&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">y&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="mi">12&lt;/span> &lt;span class="p">},&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="nx">x&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">y&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="mi">20&lt;/span> &lt;span class="p">}],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">options&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">xTickCount&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">yTickCount&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">showLine&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">dotSize&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{{&lt;/span>&lt;span class="o">&amp;lt;&lt;/span> &lt;span class="err">/chart-xkcd &amp;gt;}}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div>
&lt;svg class='xy1'>&lt;/svg>
&lt;script src="https://cdn.jsdelivr.net/npm/chart.xkcd@1/dist/chart.xkcd.min.js">&lt;/script>
&lt;script>
const svgxy1 = document.querySelector('.xy1');
new chartXkcd.XY(svgxy1, {
title: 'A vs B',
xLabel: 'Abscisse',
yLabel: 'Ordonnee',
data: {
datasets: [{
label: 'A',
data: [{ x: 1, y: 30 }, { x: 3, y: 8 }, { x: 5, y: 45 }, { x: 7, y: 22 }, { x: 9, y: -4 }],
}, {
label: 'B',
data: [{ x: -2, y: 12 }, { x: 4, y: -20 }, { x: 6, y: 53 }, { x: 8, y: 12 }, { x: 10, y: 20 }],
}],
},
options: {
xTickCount: 10,
yTickCount: 10,
showLine: false,
dotSize: 1,
}
});
&lt;/script>
&lt;/div>
&lt;p>Avec &lt;code>options: {showLine: true}&lt;/code> :&lt;/p>
&lt;div>
&lt;svg class='xy2'>&lt;/svg>
&lt;script src="https://cdn.jsdelivr.net/npm/chart.xkcd@1/dist/chart.xkcd.min.js">&lt;/script>
&lt;script>
const svgxy2 = document.querySelector('.xy2');
new chartXkcd.XY(svgxy2, {
title: 'A vs B',
xLabel: 'Abscisse',
yLabel: 'Ordonnee',
data: {
datasets: [{
label: 'A',
data: [{ x: 1, y: 30 }, { x: 3, y: 8 }, { x: 5, y: 45 }, { x: 7, y: 22 }, { x: 9, y: -4 }],
}, {
label: 'B',
data: [{ x: -2, y: 12 }, { x: 4, y: -20 }, { x: 6, y: 53 }, { x: 8, y: 12 }, { x: 10, y: 20 }],
}],
},
options: {
xTickCount: 10,
yTickCount: 10,
showLine: true,
dotSize: 1,
}
});
&lt;/script>
&lt;/div>
&lt;h3 id="radar">Radar
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="line">&lt;span class="cl">&lt;span class="p">{{&lt;/span>&lt;span class="o">&amp;lt;&lt;/span> &lt;span class="nx">chart&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">xkcd&lt;/span> &lt;span class="nx">name&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;radar&amp;#34;&lt;/span> &lt;span class="nx">type&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;Radar&amp;#34;&lt;/span> &lt;span class="o">&amp;gt;&lt;/span>&lt;span class="p">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">title&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s1">&amp;#39;A vs B&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">data&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">labels&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;a&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;b&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;c&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;d&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;e&amp;#39;&lt;/span>&lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">datasets&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">[{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">label&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s1">&amp;#39;A&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">data&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">label&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s1">&amp;#39;B&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">data&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">options&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">showLegend&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">dotSize&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">.&lt;/span>&lt;span class="mi">7&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">showLabels&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{{&lt;/span>&lt;span class="o">&amp;lt;&lt;/span> &lt;span class="err">/chart-xkcd &amp;gt;}}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div>
&lt;svg class='radar'>&lt;/svg>
&lt;script src="https://cdn.jsdelivr.net/npm/chart.xkcd@1/dist/chart.xkcd.min.js">&lt;/script>
&lt;script>
const svgradar = document.querySelector('.radar');
new chartXkcd.Radar(svgradar, {
title: 'A vs B',
data: {
labels: ['a', 'b', 'c', 'd', 'e'],
datasets: [{
label: 'A',
data: [3, 1, 3, 3, 2],
}, {
label: 'B',
data: [1, 3, 2, 3, 1],
}],
},
options: {
showLegend: true,
dotSize: .7,
showLabels: true,
},
});
&lt;/script>
&lt;/div></description></item><item><title>Falcosidekick 2.8.0</title><link>https://thomas.labarussias.fr/posts/falcosidekick-v-2-8-0/</link><pubDate>Wed, 11 Sep 2019 00:00:00 +0000</pubDate><guid>https://thomas.labarussias.fr/posts/falcosidekick-v-2-8-0/</guid><description>&lt;p>Nouvelle release, la &lt;a class="link" href="https://github.com/Issif/falcosidekick/releases/tag/2.8.0" target="_blank" rel="noopener"
>&lt;strong>2.8.0&lt;/strong>&lt;/a>, de mon proxy pour &lt;a class="link" href="https://falco.org/" target="_blank" rel="noopener"
>&lt;strong>falco&lt;/strong>&lt;/a>.&lt;/p>
&lt;p>La grosse feature Ã©tant l&amp;rsquo;ajout de &lt;a class="link" href="https://nats.io/" target="_blank" rel="noopener"
>&lt;strong>NATS&lt;/strong>&lt;/a> (une &lt;em>message queue&lt;/em> en &lt;strong>Go&lt;/strong>) comme sortie.&lt;/p>
&lt;p>Le repo &lt;a class="link" href="https://github.com/falcosecurity/falcosidekick" target="_blank" rel="noopener"
>Github&lt;/a> et l&amp;rsquo;image sur le &lt;a class="link" href="https://hub.docker.com/r/falcosecurity/falcosidekick/" target="_blank" rel="noopener"
>DockerHub&lt;/a>.&lt;/p>
&lt;p>&lt;em>Enjoy&lt;/em>&lt;/p></description></item><item><title>Utiliser k3d pour avoir un cluster k8s en local</title><link>https://thomas.labarussias.fr/posts/utiliser-k3d/</link><pubDate>Thu, 05 Sep 2019 00:00:00 +0000</pubDate><guid>https://thomas.labarussias.fr/posts/utiliser-k3d/</guid><description>&lt;p>Afin de parfaire mes connaissances sur &lt;a class="link" href="https://kubernetes.io/" target="_blank" rel="noopener"
>&lt;strong>kubernetes&lt;/strong>&lt;/a>, &lt;em>aka&lt;/em> &lt;strong>k8s&lt;/strong> pour les intimes, j&amp;rsquo;avais envie de monter un &lt;em>cluster&lt;/em> sur mon &lt;em>laptop&lt;/em>, pas juste un noeud tout seul. Jusqu&amp;rsquo;Ã  prÃ©sent je n&amp;rsquo;avais testÃ© que des solutions pour avoir des &lt;strong>k8s&lt;/strong> mono-noeud, c&amp;rsquo;est sympa, mais trop Ã©loignÃ© de la rÃ©alitÃ©, surtout si on veut tester des mÃ©thodes de rÃ©silience, d&amp;rsquo;&lt;em>auto-scaling&lt;/em> de &lt;em>pods&lt;/em>, de &lt;em>deployments&lt;/em>, de &lt;em>daemonset&lt;/em>, etc.&lt;/p>
&lt;p>Et lÃ , la rÃ©vÃ©lation ! Je connaissais dÃ©jÃ  &lt;a class="link" href="https://github.com/rancher/k3s" target="_blank" rel="noopener"
>&lt;strong>k3s&lt;/strong>&lt;/a>, le &lt;strong>k8s&lt;/strong> ultra allÃ©gÃ© de chez &lt;a class="link" href="https://rancher.com/" target="_blank" rel="noopener"
>&lt;strong>rancher&lt;/strong>&lt;/a> et il s&amp;rsquo;avÃ¨re qu&amp;rsquo;ils ont dÃ©veloppÃ© un petit utilitaire pour monter un &lt;em>cluster&lt;/em> dans des &lt;em>containeurs&lt;/em> &lt;strong>docker&lt;/strong> avec, le bien nommÃ© &lt;a class="link" href="https://github.com/rancher/k3d" target="_blank" rel="noopener"
>&lt;strong>k3d&lt;/strong>&lt;/a>.&lt;/p>
&lt;p>AprÃ¨s plusieurs heures de tests, je suis emballÃ©, c&amp;rsquo;est ultra rapide, ultra &lt;em>light&lt;/em> et Ã§a fonctionne avec tous les outils classiques. Un &lt;strong>ingress controller&lt;/strong> basÃ© sur &lt;strong>traefik&lt;/strong> est directement dÃ©ployÃ©, donc on a de base un environnement fonctionnel. Simple. Efficace.&lt;/p>
&lt;h2 id="installation-de-k3d">Installation de k3d
&lt;/h2>&lt;p>Rien de compliquÃ© pour l&amp;rsquo;installer, plusieurs mÃ©thodes sont fournies sur le &lt;a class="link" href="https://github.com/rancher/k3d#get" target="_blank" rel="noopener"
>repo Github officiel&lt;/a>. Comme c&amp;rsquo;est du &lt;strong>go&lt;/strong>, aucune dÃ©pendance. &lt;em>Easy&lt;/em>.&lt;/p>
&lt;h2 id="crÃ©er-son-premier-cluster">CrÃ©er son premier cluster
&lt;/h2>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">~ $ k3d create -n mon-cluster-test --publish &lt;span class="m">80&lt;/span> --publish &lt;span class="m">8080&lt;/span> --publish &lt;span class="m">443&lt;/span> -w &lt;span class="m">2&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">2019/09/05 23:16:34 Created cluster network with ID cae80bddca7cf614494b9d97f7d6edf2b14d45864ef1aa0b1a899a93122ecc1b
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2019/09/05 23:16:34 Created docker volume k3d-mon-cluster-test-images
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2019/09/05 23:16:34 Creating cluster &lt;span class="o">[&lt;/span>mon-cluster-test&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2019/09/05 23:16:34 Creating server using docker.io/rancher/k3s:v0.7.0...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2019/09/05 23:16:34 Pulling image docker.io/rancher/k3s:v0.7.0...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2019/09/05 23:16:47 Booting &lt;span class="m">2&lt;/span> workers &lt;span class="k">for&lt;/span> cluster mon-cluster-test
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2019/09/05 23:16:48 Created worker with ID b0c019c001376c9aa07f8fb65b52da1b2d52fbe61f25cb24c7198c5b122a2a09
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2019/09/05 23:16:49 Created worker with ID a9d959899a2119606248bf8dd5d681f05efb7232d19c5f8206ffb5025f10885b
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2019/09/05 23:16:49 SUCCESS: created cluster &lt;span class="o">[&lt;/span>mon-cluster-test&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2019/09/05 23:16:49 You can now use the cluster with:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">export&lt;/span> &lt;span class="nv">KUBECONFIG&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="k">$(&lt;/span>k3d get-kubeconfig --name&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;mon-cluster-test&amp;#39;&lt;/span>&lt;span class="k">)&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kubectl cluster-info
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Sur ma machine, l&amp;rsquo;exÃ©cution a pris environ 20s, en sachant que 95% du temps est liÃ© la rÃ©cupÃ©ration de l&amp;rsquo;image &lt;strong>k3s&lt;/strong>. Impressionnant.&lt;/p>
&lt;p>Une petite explication des arguments :&lt;/p>
&lt;ul>
&lt;li>&lt;code>-n&lt;/code> : le nom de notre cluster &lt;strong>k8s&lt;/strong>&lt;/li>
&lt;li>&lt;code>--publish 80 --publish 8080 --publish 443&lt;/code> : les ports qu&amp;rsquo;on va exposer, comme c&amp;rsquo;est fait avec la commande &lt;a class="link" href="https://docs.docker.com/engine/reference/run/#expose-incoming-ports" target="_blank" rel="noopener"
>&lt;em>docker run&lt;/em>&lt;/a>&lt;/li>
&lt;li>&lt;code>-w 2&lt;/code> : le nombre de &lt;em>workers&lt;/em> qu&amp;rsquo;on veut&lt;/li>
&lt;/ul>
&lt;p>On peut lister nos &lt;em>clusters&lt;/em> :&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">~ $ k3d ls
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">+------------------+------------------------------+---------+---------+
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">|&lt;/span> NAME &lt;span class="p">|&lt;/span> IMAGE &lt;span class="p">|&lt;/span> STATUS &lt;span class="p">|&lt;/span> WORKERS &lt;span class="p">|&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">+------------------+------------------------------+---------+---------+
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">|&lt;/span> mon-cluster-test &lt;span class="p">|&lt;/span> docker.io/rancher/k3s:v0.7.0 &lt;span class="p">|&lt;/span> running &lt;span class="p">|&lt;/span> 2/2 &lt;span class="p">|&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">+------------------+------------------------------+---------+---------+
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>L&amp;rsquo;image est effectivement de taille rÃ©duite (&lt;em>proportionnellement aux autres solutions&lt;/em>) :&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">REPOSITORY TAG IMAGE ID CREATED SIZE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher/k3s v0.7.0 f1ec9d3fbf66 &lt;span class="m">6&lt;/span> weeks ago 119MB
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="se-connecter-au-cluster">Se connecter au cluster
&lt;/h2>&lt;p>Comme prÃ©cisÃ© dans les logs de crÃ©ation, on peut rÃ©cupÃ©rer le &lt;em>kubeconfig&lt;/em> associÃ© pour utiliser les outils classiques (&lt;a class="link" href="https://github.com/kubernetes/kubernetes/tree/master/pkg/kubectl" target="_blank" rel="noopener"
>&lt;strong>kubectl&lt;/strong>&lt;/a>, &lt;a class="link" href="https://github.com/derailed/k9s" target="_blank" rel="noopener"
>&lt;strong>k9s&lt;/strong>&lt;/a>, &lt;a class="link" href="https://github.com/helm/helm" target="_blank" rel="noopener"
>&lt;strong>helm&lt;/strong>&lt;/a>, etc) :&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">~ $ &lt;span class="nb">export&lt;/span> &lt;span class="nv">KUBECONFIG&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="k">$(&lt;/span>k3d get-kubeconfig --name&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;mon-cluster-test&amp;#39;&lt;/span>&lt;span class="k">)&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">~ $ kubectl get nodes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME STATUS ROLES AGE VERSION
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">k3d-mon-cluster-test-server Ready master 2m v1.14.4-k3s.1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">k3d-mon-cluster-test-worker-0 Ready worker 2m v1.14.4-k3s.1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">k3d-mon-cluster-test-worker-1 Ready worker 2m v1.14.4-k3s.1
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="premier-dÃ©ploiement">Premier dÃ©ploiement
&lt;/h2>&lt;p>Afin de tester tout cela, nous allons appliquer un premier &lt;em>deployment&lt;/em> et tenter d&amp;rsquo;y accÃ©der. Cela sera un simple &lt;em>micro-service&lt;/em> qui nous rÃ©pondra quelques infos sur lui-mÃªme (sur quel &lt;em>noeud&lt;/em> il tourne, son nom, le contenu de la requÃªte &lt;em>HTTP&lt;/em> qu&amp;rsquo;il a reÃ§ue, etc). Le container qui sera utilisÃ© est fourni par ailleurs par ceux derriÃ¨re &lt;strong>traefik&lt;/strong> : &lt;a class="link" href="https://hub.docker.com/r/containous/whoami" target="_blank" rel="noopener"
>&lt;strong>containous/whoami&lt;/strong>&lt;/a>.&lt;/p>
&lt;h3 id="crÃ©ation-dun-namespace-dÃ©diÃ©">CrÃ©ation d&amp;rsquo;un namespace dÃ©diÃ©
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">~ $ kubectl create namespace whoami
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>C&amp;rsquo;est juste histoire de bien segmenter les choses.&lt;/p>
&lt;h3 id="application-du-deployment">Application du &lt;em>deployment&lt;/em>
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">~ $ kubectl create deployment whoami --image&lt;span class="o">=&lt;/span>containous/whoami -n whoami
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="scaling-du-replicaset">&lt;em>Scaling&lt;/em> du &lt;em>replicaSet&lt;/em>
&lt;/h3>&lt;p>Nous avons un &lt;em>cluster&lt;/em> Ã  2 noeuds, Ã§a serait dommage de n&amp;rsquo;avoir qu&amp;rsquo;un seul &lt;em>pod&lt;/em>, augmentons Ã  2 le &lt;em>replicaSet&lt;/em> associÃ© :&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">~ $ kubectl scale --replicas &lt;span class="m">2&lt;/span> deployment/whoami -n whoami
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">~ $ kubectl get rs -n whoami
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME DESIRED CURRENT READY AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">whoami-756586b9ff &lt;span class="m">2&lt;/span> &lt;span class="m">2&lt;/span> &lt;span class="m">2&lt;/span> 4m33s
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="crÃ©ation-du-service">CrÃ©ation du &lt;em>service&lt;/em>
&lt;/h3>&lt;p>Nous avons 2 &lt;em>pods&lt;/em>, nous allons crÃ©er un &lt;em>service&lt;/em> pour avoir une rÃ©partition de charge :&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">~ $ kubectl create service clusterip whoami --tcp&lt;span class="o">=&lt;/span>80:80 -n whoami
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="crÃ©ation-de-lingress">CrÃ©ation de l&amp;rsquo;&lt;em>ingress&lt;/em>
&lt;/h3>&lt;p>Tout est prÃªt au sein de notre &lt;em>cluster&lt;/em>, il est temps de nous permettre d&amp;rsquo;accÃ©der Ã  notre &lt;em>micro-service&lt;/em>, on va utiliser une ressource de type &lt;em>ingress&lt;/em> :&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">~ $ cat &lt;span class="s">&amp;lt;&amp;lt;EOF | kubectl apply -n whoami -f -
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">apiVersion: extensions/v1beta1
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">kind: Ingress
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">metadata:
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s"> name: whoami
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s"> annotations:
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s"> ingress.kubernetes.io/ssl-redirect: &amp;#34;false&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">spec:
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s"> rules:
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s"> - http:
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s"> paths:
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s"> - path: /
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s"> backend:
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s"> serviceName: whoami
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s"> servicePort: 80
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">EOF&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="testons-le-micro-service">Testons le &lt;em>micro-service&lt;/em>
&lt;/h3>&lt;p>A la crÃ©ation du cluster, nous avons publier le port 80 au niveau de l&amp;rsquo;host, il est temps de trouver le port qui a Ã©tÃ© associÃ© (&lt;em>bind&lt;/em>) :&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">~ $ docker inspect --format&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;{{range $p, $conf := .NetworkSettings.Ports}} {{$p}} -&amp;gt; {{(index $conf 0).HostPort}} {{end}}&amp;#39;&lt;/span> &lt;span class="k">$(&lt;/span>docker ps --filter &lt;span class="s2">&amp;#34;name=k3d-mon-cluster-test-server&amp;#34;&lt;/span> -q&lt;span class="k">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">443/tcp -&amp;gt; &lt;span class="m">32810&lt;/span> 6443/tcp -&amp;gt; &lt;span class="m">6443&lt;/span> 80/tcp -&amp;gt; &lt;span class="m">32811&lt;/span> 8080/tcp -&amp;gt; &lt;span class="m">32809&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>L&amp;rsquo;&lt;em>ingress&lt;/em> Ã©coute sur le port 80, le port associÃ© est donc le 32811 dans mon cas. Faisons plusieurs appels et vÃ©rifions :&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">~ $ curl http://localhost:32811
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Hostname: whoami-756586b9ff-4mqb6
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">IP: 127.0.0.1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">IP: ::1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">IP: 10.42.2.4
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">IP: fe80::a89f:5eff:fef5:d426
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">RemoteAddr: 10.42.1.3:36824
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">GET / HTTP/1.1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Host: localhost:32811
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">User-Agent: curl/7.47.0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Accept: */*
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Accept-Encoding: gzip
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">X-Forwarded-For: 10.42.1.1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">X-Forwarded-Host: localhost:32811
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">X-Forwarded-Port: &lt;span class="m">32811&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">X-Forwarded-Proto: http
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">X-Forwarded-Server: traefik-56688c4464-wlk2r
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">X-Real-Ip: 10.42.1.1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">~ $ curl http://localhost:32811
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Hostname: whoami-756586b9ff-6wn52
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">IP: 127.0.0.1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">IP: ::1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">IP: 10.42.0.4
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">IP: fe80::7c0f:1fff:fe2b:bcb2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">RemoteAddr: 10.42.1.3:41180
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">GET / HTTP/1.1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Host: localhost:32811
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">User-Agent: curl/7.47.0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Accept: */*
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Accept-Encoding: gzip
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">X-Forwarded-For: 10.42.1.1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">X-Forwarded-Host: localhost:32811
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">X-Forwarded-Port: &lt;span class="m">32811&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">X-Forwarded-Proto: http
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">X-Forwarded-Server: traefik-56688c4464-wlk2r
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">X-Real-Ip: 10.42.1.1
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Nous avons bien 2 rÃ©ponses diffÃ©rentes :&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">Hostname: whoami-756586b9ff-4mqb6
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">IP: 10.42.2.4
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Hostname: whoami-756586b9ff-6wn52
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">IP: 10.42.0.4
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Qui correspondent Ã  nos 2 &lt;em>pods&lt;/em> :&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">~ $ kubectl get pods -n whoami
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME READY STATUS RESTARTS AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">whoami-756586b9ff-4mqb6 1/1 Running &lt;span class="m">0&lt;/span> 24m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">whoami-756586b9ff-6wn52 1/1 Running &lt;span class="m">0&lt;/span> 20m
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;em>Enjoy&lt;/em>&lt;/p></description></item><item><title>Falcosidekick fait dÃ©sormais partie de l'organisation Falcosecurity</title><link>https://thomas.labarussias.fr/posts/falcosidekick-migre-vers-falcosecurity/</link><pubDate>Wed, 28 Aug 2019 00:00:00 +0000</pubDate><guid>https://thomas.labarussias.fr/posts/falcosidekick-migre-vers-falcosecurity/</guid><description>&lt;p>Les mainteneurs de &lt;strong>falco&lt;/strong> m&amp;rsquo;ont proposÃ© de migrer &lt;strong>falcosidekick&lt;/strong> au sein de l&amp;rsquo;organisation officielle &lt;strong>falcosecurity&lt;/strong>. Il devient donc un projet officiel ðŸŽ‰ðŸ˜.&lt;/p>
&lt;p>Le repo &lt;a class="link" href="https://github.com/falcosecurity/falcosidekick" target="_blank" rel="noopener"
>Github&lt;/a> et l&amp;rsquo;image sur le &lt;a class="link" href="https://hub.docker.com/r/falcosecurity/falcosidekick/" target="_blank" rel="noopener"
>DockerHub&lt;/a>.&lt;/p>
&lt;p>Au passage, j&amp;rsquo;ai sorti la &lt;a class="link" href="https://github.com/Issif/falcosidekick/releases/tag/2.7.1" target="_blank" rel="noopener"
>&lt;strong>2.7.1&lt;/strong>&lt;/a> qui met Ã  jour la version de Go utilisÃ©e (1.12).&lt;/p>
&lt;p>&lt;em>Enjoy&lt;/em>&lt;/p></description></item><item><title>Falcosidekick 2.7.0</title><link>https://thomas.labarussias.fr/posts/falcosidekick-v-2-7-0/</link><pubDate>Tue, 27 Aug 2019 00:00:00 +0000</pubDate><guid>https://thomas.labarussias.fr/posts/falcosidekick-v-2-7-0/</guid><description>&lt;p>Nouvelle release, la &lt;a class="link" href="https://github.com/Issif/falcosidekick/releases/tag/2.7.0" target="_blank" rel="noopener"
>&lt;strong>2.7.0&lt;/strong>&lt;/a>, de mon proxy pour &lt;a class="link" href="https://falco.org/" target="_blank" rel="noopener"
>&lt;strong>falco&lt;/strong>&lt;/a>.&lt;/p>
&lt;p>La grosse feature Ã©tant l&amp;rsquo;ajout de &lt;a class="link" href="https://grafana.com/oss/loki" target="_blank" rel="noopener"
>&lt;strong>Loki&lt;/strong>&lt;/a> comme sortie :&lt;/p>
&lt;p>&lt;img src="https://raw.githubusercontent.com/falcosecurity/falcosidekick/master/docs/outputs/images/loki.png"
loading="lazy"
alt="Grafana Loki"
>&lt;/p>
&lt;p>Le repo &lt;a class="link" href="https://github.com/falcosecurity/falcosidekick" target="_blank" rel="noopener"
>Github&lt;/a> et l&amp;rsquo;image sur le &lt;a class="link" href="https://hub.docker.com/r/falcosecurity/falcosidekick/" target="_blank" rel="noopener"
>DockerHub&lt;/a>.&lt;/p>
&lt;p>&lt;em>Enjoy&lt;/em>&lt;/p></description></item><item><title>Falcosidekick 2.6.0</title><link>https://thomas.labarussias.fr/posts/falcosidekick-v-2-6-0/</link><pubDate>Mon, 26 Aug 2019 00:00:00 +0000</pubDate><guid>https://thomas.labarussias.fr/posts/falcosidekick-v-2-6-0/</guid><description>&lt;p>Nouvelle release, la &lt;a class="link" href="https://github.com/Issif/falcosidekick/releases/tag/2.6.0" target="_blank" rel="noopener"
>&lt;strong>2.6.0&lt;/strong>&lt;/a>, de mon proxy pour &lt;a class="link" href="https://falco.org/" target="_blank" rel="noopener"
>&lt;strong>falco&lt;/strong>&lt;/a>.&lt;/p>
&lt;p>La grosse feature Ã©tant l&amp;rsquo;ajout du &lt;strong>SMTP&lt;/strong> (envoi d&amp;rsquo;email) comme sortie :&lt;/p>
&lt;p>&lt;img src="https://raw.githubusercontent.com/falcosecurity/falcosidekick/master/docs/outputs/images/smtp_html.png"
loading="lazy"
alt="SMTP html"
>&lt;/p>
&lt;p>Afin de respecter les standards, la version &lt;em>html&lt;/em> contient Ã©galement la version &lt;em>plaintext&lt;/em>. Il est aussi possible d&amp;rsquo;envoyer uniquement la version &lt;em>plaintext&lt;/em>, utile pour certains systÃ¨mes de &lt;em>ticketing&lt;/em> qui utilisent l&amp;rsquo;email pour la crÃ©ation.&lt;/p>
&lt;p>Le repo &lt;a class="link" href="https://github.com/falcosecurity/falcosidekick" target="_blank" rel="noopener"
>Github&lt;/a> et l&amp;rsquo;image sur le &lt;a class="link" href="https://hub.docker.com/r/falcosecurity/falcosidekick/" target="_blank" rel="noopener"
>DockerHub&lt;/a>.&lt;/p>
&lt;p>&lt;em>Enjoy&lt;/em>&lt;/p></description></item><item><title>Proxifier Traefik par Traefik</title><link>https://thomas.labarussias.fr/posts/traefik-proxyfier-dashboard/</link><pubDate>Mon, 26 Aug 2019 00:00:00 +0000</pubDate><guid>https://thomas.labarussias.fr/posts/traefik-proxyfier-dashboard/</guid><description>&lt;p>&lt;a class="link" href="https://traefik.io/" target="_blank" rel="noopener"
>&lt;strong>Traefik&lt;/strong>&lt;/a> possÃ¨de une &lt;em>UI&lt;/em> basique qui est par dÃ©faut exposÃ©e sur un port diffÃ©rent. Il est possible de faire en sorte que &lt;strong>Traefik&lt;/strong> serve lui mÃªme de proxy, cela permet :&lt;/p>
&lt;ul>
&lt;li>ne plus avoir Ã  utiliser un port diffÃ©rent pour accÃ©der l&amp;rsquo;&lt;em>UI&lt;/em>, mais un domaine classique (&amp;quot;&lt;em>traefik.mondomaine.net&lt;/em>&amp;quot; par ex.)&lt;/li>
&lt;li>forcer l&amp;rsquo;accÃ¨s en http&lt;strong>s&lt;/strong> avec en prime un certificat &lt;a class="link" href="https://letsencrypt.org/fr/" target="_blank" rel="noopener"
>&lt;em>Let&amp;rsquo;s Encrypt&lt;/em>&lt;/a> automatique et gratuit&lt;/li>
&lt;li>permettre de rajouter une authentification, par dÃ©faut, l&amp;rsquo;&lt;em>UI&lt;/em> est ouverte Ã  tout une fois activÃ©e&lt;/li>
&lt;/ul>
&lt;p>Dans mon cas, je fais tourner &lt;strong>Traefik&lt;/strong> dans un container, mais Ã§a marchera pareil si vous le faÃ®tes tourner directement sur l&amp;rsquo;&lt;em>host&lt;/em>, prenez juste soin de filtrer le port de l&amp;rsquo;&lt;em>UI&lt;/em> (&lt;em>8080&lt;/em> par dÃ©faut) pour qu&amp;rsquo;il n&amp;rsquo;accepte que les connexions de la boucle local (&lt;em>127.0.0.1&lt;/em>).&lt;/p>
&lt;p>VoilÃ  ce qu&amp;rsquo;il faut avoir Ã  minima dans sa configuration &lt;em>config.toml&lt;/em> :&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;span class="lnt">57
&lt;/span>&lt;span class="lnt">58
&lt;/span>&lt;span class="lnt">59
&lt;/span>&lt;span class="lnt">60
&lt;/span>&lt;span class="lnt">61
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-toml" data-lang="toml">&lt;span class="line">&lt;span class="cl">&lt;span class="c">################################################################&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c"># Configuration globale&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c">################################################################&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">defaultEntryPoints&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;http&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;https&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="nx">entryPoints&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">[&lt;/span>&lt;span class="nx">entryPoints&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">http&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">address&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;:80&amp;#34;&lt;/span> &lt;span class="c"># traefik ecoute sur le port 80&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">[&lt;/span>&lt;span class="nx">entryPoints&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">http&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">redirect&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">entryPoint&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;https&amp;#34;&lt;/span> &lt;span class="c"># redirection http &amp;gt; https&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">[&lt;/span>&lt;span class="nx">entryPoints&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">https&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">address&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;:443&amp;#34;&lt;/span> &lt;span class="c"># traefik ecoute sur le port 443&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">[&lt;/span>&lt;span class="nx">entryPoints&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">https&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">tls&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">minVersion&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;VersionTLS12&amp;#34;&lt;/span> &lt;span class="c"># version minimum de TLS acceptee&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">[&lt;/span>&lt;span class="nx">entryPoints&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">ui&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">address&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="s2">&amp;#34;127.0.0.1:8080&amp;#34;&lt;/span> &lt;span class="c"># on ecoute uniquement sur la boucle locale pour ce port&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">[&lt;/span>&lt;span class="nx">entryPoints&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">ui&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">auth&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">[&lt;/span>&lt;span class="nx">entryPoints&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">ui&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">auth&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">basic&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">users&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;XXXX:YYYY&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="c"># les identifiants au format htpasswd&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c">################################################################&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c"># Configuration pour let&amp;#39;s encrypt&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c">################################################################&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="nx">acme&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">email&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;xxx@yyy.zzz&amp;#34;&lt;/span> &lt;span class="c"># votre mail pour lets encrypt&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">storage&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;/certs/acme.json&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">entryPoint&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;https&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">onDemand&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="kc">true&lt;/span> &lt;span class="c"># demande automatique de certificat&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">acmeLogging&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="kc">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">[&lt;/span>&lt;span class="nx">acme&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">httpChallenge&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">entryPoint&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;http&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c">################################################################&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c"># Configuration de l&amp;#39;API de Traefik&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c">################################################################&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="nx">api&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">entryPoint&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;ui&amp;#34;&lt;/span> &lt;span class="c"># l API ecoutera sur cet entrypoint&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">dashboard&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="kc">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">[&lt;/span>&lt;span class="nx">api&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">statistics&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">recentErrors&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="mi">50&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c">################################################################&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c"># Configuration pour l&amp;#39;UI de Traefik&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c">################################################################&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="nx">file&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="nx">frontends&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">[&lt;/span>&lt;span class="nx">frontends&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">ui&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">backend&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;ui&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">passHostHeader&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="kc">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">[&lt;/span>&lt;span class="nx">frontends&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">ui&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">routes&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">default&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">rule&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;Host:ui.mondomaine.net&amp;#34;&lt;/span> &lt;span class="c"># votre domaine a configurer&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="nx">backends&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">[&lt;/span>&lt;span class="nx">backends&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">ui&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">[&lt;/span>&lt;span class="nx">backends&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">ui&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">servers&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">default&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">url&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;http://127.0.0.1:8080&amp;#34;&lt;/span> &lt;span class="c"># le backend a utiliser qui s avere etre l entrypoint de l API&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;em>Enjoy&lt;/em>&lt;/p></description></item><item><title>Conversion de Types en Go</title><link>https://thomas.labarussias.fr/posts/golang-conversion-types/</link><pubDate>Wed, 21 Aug 2019 00:00:00 +0000</pubDate><guid>https://thomas.labarussias.fr/posts/golang-conversion-types/</guid><description>&lt;hr>
&lt;h1 id="int64--string">int64 ðŸ ® string
&lt;/h1>&lt;h2 id="formatint">&lt;a class="link" href="https://golang.org/pkg/strconv/#FormatInt" target="_blank" rel="noopener"
>FormatInt&lt;/a>
&lt;/h2>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">strconv&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">FormatInt&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">i&lt;/span> &lt;span class="kt">int64&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">base&lt;/span> &lt;span class="kt">int&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="itoa">&lt;a class="link" href="https://golang.org/pkg/strconv/#Itoa" target="_blank" rel="noopener"
>Itoa&lt;/a>
&lt;/h2>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">strconv&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Itoa&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">i&lt;/span> &lt;span class="kt">int&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// Itoa is equivalent to FormatInt(int64(i), 10). &lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h1 id="string--int64">string ðŸ ® int64
&lt;/h1>&lt;h2 id="parseint">&lt;a class="link" href="https://golang.org/pkg/strconv/#ParseInt" target="_blank" rel="noopener"
>ParseInt&lt;/a>
&lt;/h2>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">strconv&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ParseInt&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">s&lt;/span> &lt;span class="kt">string&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">base&lt;/span> &lt;span class="kt">int&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">bitSize&lt;/span> &lt;span class="kt">int&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="atoi">&lt;a class="link" href="https://golang.org/pkg/strconv/#Atoi" target="_blank" rel="noopener"
>Atoi&lt;/a>
&lt;/h2>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">strconv&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Atoi&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">s&lt;/span> &lt;span class="kt">string&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// Atoi is equivalent to ParseInt(s, 10, 0), converted to type int. &lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h1 id="string--time">string ðŸ ® Time
&lt;/h1>&lt;ul>
&lt;li>Pour le &lt;a class="link" href="https://godoc.org/time#pkg-constants" target="_blank" rel="noopener"
>layout&lt;/a>.&lt;/li>
&lt;li>Pour la &lt;a class="link" href="https://godoc.org/time#LoadLocation" target="_blank" rel="noopener"
>location&lt;/a>.&lt;/li>
&lt;/ul>
&lt;h2 id="parse">&lt;a class="link" href="https://godoc.org/time#Parse" target="_blank" rel="noopener"
>Parse&lt;/a>
&lt;/h2>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Parse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">layout&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">value&lt;/span> &lt;span class="kt">string&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="parseinlocation">&lt;a class="link" href="https://godoc.org/time#ParseInLocation" target="_blank" rel="noopener"
>ParseInLocation&lt;/a>
&lt;/h2>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ParseInLocation&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">layout&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">value&lt;/span> &lt;span class="kt">string&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">loc&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">Location&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h1 id="time--string">Time ðŸ ® string
&lt;/h1>&lt;p>Pour le &lt;a class="link" href="https://godoc.org/time#pkg-constants" target="_blank" rel="noopener"
>layout&lt;/a>.&lt;/p>
&lt;h2 id="timeformat">&lt;a class="link" href="https://godoc.org/time#Time.Format" target="_blank" rel="noopener"
>Time.Format&lt;/a>
&lt;/h2>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">var&lt;/span> &lt;span class="nx">t&lt;/span> &lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Time&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">t&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Format&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">layout&lt;/span> &lt;span class="kt">string&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>DÃ©coder du base64 en Go</title><link>https://thomas.labarussias.fr/posts/decoder-du-base64-en-go/</link><pubDate>Mon, 19 Aug 2019 00:00:00 +0000</pubDate><guid>https://thomas.labarussias.fr/posts/decoder-du-base64-en-go/</guid><description>&lt;p>Je tentais de dÃ©coder la partie &lt;em>payload&lt;/em> d&amp;rsquo;un token &lt;em>JWT&lt;/em> (&lt;a class="link" href="https://scotch.io/tutorials/the-anatomy-of-a-json-web-token" target="_blank" rel="noopener"
>https://scotch.io/tutorials/the-anatomy-of-a-json-web-token&lt;/a>) quand j&amp;rsquo;ai eu l&amp;rsquo;erreur suivante :&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">panic: illegal base64 data at input byte &lt;span class="m">349&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Ma faÃ§on de faire Ã©tait pourtant classique et a toujours fonctionnÃ© auparavant :&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">base64&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">StdEncoding&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">DecodeString&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">s&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Et le dÃ©codage du &lt;em>string&lt;/em> via un autre outil ne posait pas de souci. ðŸ˜§&lt;/p>
&lt;p>La solution se trouvait une fois de plus dans la documentation de &lt;strong>Go&lt;/strong> : &lt;a class="link" href="https://golang.org/pkg/encoding/base64/#pkg-variables" target="_blank" rel="noopener"
>https://golang.org/pkg/encoding/base64/#pkg-variables&lt;/a>&lt;/p>
&lt;p>Il existe plusieurs fonctions de dÃ©codage qui prennent ou non en compte les caractÃ¨res de &lt;em>padding&lt;/em>, en changeant pour :&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">base64&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">RawStdEncoding&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">DecodeString&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">s&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Mon &lt;em>payload&lt;/em> Ã©tait dÃ©codÃ©.&lt;/p>
ðŸ‘</description></item><item><title>A propos</title><link>https://thomas.labarussias.fr/about/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://thomas.labarussias.fr/about/</guid><description>&lt;p>Mon profil &lt;a class="link" href="https://www.linkedin.com/in/thomas-labarussias/" target="_blank" rel="noopener"
>Linkedin&lt;/a>&lt;/p>
&lt;p>TL;DR:&lt;/p>
&lt;ul>
&lt;li>IngÃ©nieur diplÃ´mÃ© des Arts &amp;amp; MÃ©tiers en conception mÃ©canique et gestion de production industrielle&lt;/li>
&lt;li>Utilisateur de GNU/Linux depuis 2 dÃ©cennies&lt;/li>
&lt;li>PassionnÃ© de mÃ©trologie/monitoring&lt;/li>
&lt;li>Fondamentalement un OPS (DevOPS/SRE)&lt;/li>
&lt;li>7 ans d&amp;rsquo;astreinte&lt;/li>
&lt;li>FinOps&lt;/li>
&lt;li>Go developer&lt;/li>
&lt;li>OSS contributor&lt;/li>
&lt;li>DevRel&lt;/li>
&lt;li>Speaker&lt;/li>
&lt;/ul></description></item><item><title>Archives</title><link>https://thomas.labarussias.fr/archives/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://thomas.labarussias.fr/archives/</guid><description/></item><item><title>Search</title><link>https://thomas.labarussias.fr/search/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://thomas.labarussias.fr/search/</guid><description/></item><item><title>Talks</title><link>https://thomas.labarussias.fr/talks/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://thomas.labarussias.fr/talks/</guid><description>&lt;p>A titres personnel et professionnel, j&amp;rsquo;ai eu le privilÃ¨ge au cours des annÃ©es de donner de nombreuses confÃ©rences et de participer Ã  des podcasts en tant qu&amp;rsquo;invitÃ©.&lt;/p>
&lt;p>Vous trouverez ci-dessous une liste (non exhaustive) de ces confÃ©rences et podcasts dont les captations sont en ligne.&lt;/p>
&lt;h3 id="2024">2024
&lt;/h3>&lt;ul>
&lt;li>&amp;#x1f1eb;&amp;#x1f1f7; &lt;a class="link" href="https://www.podcastics.com/podcast/episode/table-ronde-sur-lopen-source-283257/" target="_blank" rel="noopener"
>&lt;code>Table Ronde sur l'Open Source (WeSpeakCloud)&lt;/code>&lt;/a>&lt;/li>
&lt;li>&amp;#x1f1eb;&amp;#x1f1f7; &lt;a class="link" href="https://www.youtube.com/watch?v=9P65jDKf8MM" target="_blank" rel="noopener"
>&lt;code>SÃ©curitÃ© des conteneurs avec Falco ! - WORKSHOP COMPLET&lt;/code>&lt;/a>&lt;/li>
&lt;li>&amp;#x1f1eb;&amp;#x1f1f7; &lt;a class="link" href="https://www.youtube.com/watch?v=Mx28fhyKX7Q" target="_blank" rel="noopener"
>&lt;code>RÃ©agir Ã  temps aux menaces dans Kubernetes avec Falco (Voxxed Days Luxembourg 2024)&lt;/code>&lt;/a>&lt;/li>
&lt;li>&amp;#x1f1ec;&amp;#x1f1e7; &lt;a class="link" href="https://www.youtube.com/watch?v=ScluwvDdYqg" target="_blank" rel="noopener"
>&lt;code>Letâ€™s dissect malwares by collecting their syscalls with eBPF (KCD Czech &amp;amp; Slovak 2024)&lt;/code>&lt;/a>&lt;/li>
&lt;li>&amp;#x1f1ec;&amp;#x1f1e7; &lt;a class="link" href="https://www.youtube.com/watch?v=8V0I5ygZz3Q&amp;amp;t=186s" target="_blank" rel="noopener"
>&lt;code>Innovations and Interviews (KCD Istanbul 2024)&lt;/code>&lt;/a>&lt;/li>
&lt;li>&amp;#x1f1ec;&amp;#x1f1e7; &lt;a class="link" href="https://www.youtube.com/watch?v=bzDWBihArQY&amp;amp;t=72s" target="_blank" rel="noopener"
>&lt;code>Cloud-native threat detection with Falco&lt;/code>&lt;/a>&lt;/li>
&lt;li>&amp;#x1f1ec;&amp;#x1f1e7; &lt;a class="link" href="https://www.youtube.com/watch?v=csKxijmMVNk" target="_blank" rel="noopener"
>&lt;code>How Falco Brought Real-Time Observability to Infrastructure&lt;/code>&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="2023">2023
&lt;/h3>&lt;ul>
&lt;li>&amp;#x1f1eb;&amp;#x1f1f7; &lt;a class="link" href="https://www.podcastics.com/podcast/episode/falco-244969/" target="_blank" rel="noopener"
>&lt;code>Falco (WeSpeakCloud)&lt;/code>&lt;/a>&lt;/li>
&lt;li>&amp;#x1f1ec;&amp;#x1f1e7; &lt;a class="link" href="https://www.youtube.com/watch?v=m6rEiKAkWK8" target="_blank" rel="noopener"
>&lt;code>Use Falco and eBPF to protect your applications (Conf42 Observability 2023)&lt;/code>&lt;/a>&lt;/li>
&lt;li>&amp;#x1f1ec;&amp;#x1f1e7; &lt;a class="link" href="https://youtu.be/zThi9fnUXwE?t=110" target="_blank" rel="noopener"
>&lt;code>What happened in Kubecon Amsterdam (Interview) (KubeCon Europe 2023)&lt;/code>&lt;/a>&lt;/li>
&lt;li>&amp;#x1f1ec;&amp;#x1f1e7; &lt;a class="link" href="https://www.youtube.com/watch?v=sAmiBCt3qc4" target="_blank" rel="noopener"
>&lt;code>Enhanced Security for Multi-Tenant Architectures: Key Components and Best Practices (Multi-Tenancy Con 2023)&lt;/code>&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="2022">2022
&lt;/h3>&lt;ul>
&lt;li>&amp;#x1f1eb;&amp;#x1f1f7; &lt;a class="link" href="https://www.youtube.com/watch?v=5VSjIrSM3Tw" target="_blank" rel="noopener"
>&lt;code>DÃ©tecter et rÃ©agir aux menaces contre votre cluster Kubernetes avec Falco (Open Source Experience 2022)&lt;/code>&lt;/a>&lt;/li>
&lt;li>&amp;#x1f1eb;&amp;#x1f1f7; &lt;a class="link" href="https://www.youtube.com/watch?v=haQGJUZ2RWw" target="_blank" rel="noopener"
>&lt;code>DÃ©tecter et gÃ©rer la sÃ©curitÃ© dans un contexte Kubernetes (Meetup CNCF X WeScale)&lt;/code>&lt;/a>&lt;/li>
&lt;li>&amp;#x1f1ec;&amp;#x1f1e7; &lt;a class="link" href="https://www.youtube.com/watch?v=KFt2gwlslb8" target="_blank" rel="noopener"
>&lt;code>Extend Falco with Plugins: Trigger Alerts with any Stream of Events (CNCF)&lt;/code>&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="2021">2021
&lt;/h3>&lt;ul>
&lt;li>&amp;#x1f1eb;&amp;#x1f1f7; &lt;a class="link" href="https://medium.com/electro-monkeys/74-argocd-et-l%C3%A8re-du-gitops-avec-thomas-labarussias-et-victor-boissi%C3%A8re-45d33beabed0" target="_blank" rel="noopener"
>&lt;code>ArgoCD et lâ€™Ã¨re du GitOps (Electro Monkeys)&lt;/code>&lt;/a>&lt;/li>
&lt;li>&amp;#x1f1eb;&amp;#x1f1f7; &lt;a class="link" href="https://youtu.be/1TY2M6RyalU?list=PLZ_TUMnTqfu87lInu7CV6YugTehBRgw1C&amp;amp;t=4280" target="_blank" rel="noopener"
>&lt;code>Ajuster la taille de son cluster Kubernetes pour aider les dÃ©veloppeurs dans leurs recettes (Meetup AWS User Group Paris)&lt;/code>&lt;/a> (&lt;a class="link" href="https://docs.google.com/presentation/d/1ABG4XnZdBSTZ1wwHlFm3ROB1N84uFDZPsRRIUvRfDkQ/edit?usp=sharing" target="_blank" rel="noopener"
>&lt;em>slides&lt;/em>&lt;/a>)&lt;/li>
&lt;li>&amp;#x1f1eb;&amp;#x1f1f7; &lt;a class="link" href="https://www.youtube.com/watch?v=3CU5yu-TdNU" target="_blank" rel="noopener"
>&lt;code>DÃ©tection et RÃ©action aux menaces dans Kubernetes avec Falco (Paris Container Days 2021)&lt;/code>&lt;/a> (&lt;a class="link" href="https://docs.google.com/presentation/d/1qGaIWUhNKMdGLb8YwetmbKFxFyY1krvy_c8A7hzg-Nk/edit?usp=sharing" target="_blank" rel="noopener"
>&lt;em>slides&lt;/em>&lt;/a>)&lt;/li>
&lt;li>&amp;#x1f1eb;&amp;#x1f1f7; &lt;a class="link" href="https://www.youtube.com/watch?v=4jPlzr1-Oek" target="_blank" rel="noopener"
>&lt;code>Continuous Deployment dâ€™applications dans Kubernetes avec Argo CD (DevNation Day France 2021)&lt;/code>&lt;/a>&lt;/li>
&lt;li>&amp;#x1f1eb;&amp;#x1f1f7; &lt;a class="link" href="https://youtu.be/UCXyHRhPbdg?t=2138" target="_blank" rel="noopener"
>&lt;code>DÃ©tection et rÃ©action aux menacens dans Kubernetes - Meetup CNCF Paris&lt;/code>&lt;/a>&lt;/li>
&lt;li>&amp;#x1f1eb;&amp;#x1f1f7; &lt;a class="link" href="https://www.youtube.com/watch?v=bzDWBihArQY&amp;amp;t=72s" target="_blank" rel="noopener"
>&lt;code>Ajuster la taille de son cluster Kubernetes pour aider les dÃ©veloppeurs dans leurs recettes (AWS User Group France)&lt;/code>&lt;/a>&lt;/li>
&lt;li>&amp;#x1f1ec;&amp;#x1f1e7; &lt;a class="link" href="https://youtu.be/UCXyHRhPbdg?t=2114" target="_blank" rel="noopener"
>&lt;code>Detection and Reaction to threats in Kubernetes (Cloud Native Computing Paris)&lt;/code>&lt;/a> (&lt;a class="link" href="https://docs.google.com/presentation/d/19rtiON2kMK_OAWEXtLhPW6IEmi74vEyXVWUno384S9Q/edit?usp=sharing" target="_blank" rel="noopener"
>&lt;em>slides&lt;/em>&lt;/a>)&lt;/li>
&lt;li>&amp;#x1f1ec;&amp;#x1f1e7; &lt;a class="link" href="https://youtu.be/KCp6vAdWOD0?t=601" target="_blank" rel="noopener"
>&lt;code>FalcOMG That's AWESOME - New Things, Fixed Things, and YOU (KubeCon Europe 2021)&lt;/code>&lt;/a> (&lt;a class="link" href="https://static.sched.com/hosted_files/kccnceu2021/a1/FalcOMG%20That%27s%20AWESOME%20-%20New%20Things%2C%20Fixed%20Things%2C%20and%20YOU%20%5BKubeCon%20%2B%20CloudNativeCon%20Europe%202021%5D.pdf" target="_blank" rel="noopener"
>&lt;em>slides&lt;/em>&lt;/a>)&lt;/li>
&lt;li>&amp;#x1f1ec;&amp;#x1f1e7; &lt;a class="link" href="https://www.youtube.com/watch?v=KYpkD-sMVmk" target="_blank" rel="noopener"
>&lt;code>Falcosidekick: building a micro service for enhancing, and distributing Falco Data (Cloud Native Data Management Days)&lt;/code>&lt;/a>&lt;/li>
&lt;li>&amp;#x1f1ec;&amp;#x1f1e7; &lt;a class="link" href="https://www.youtube.com/watch?v=F0qWkJ68lyE" target="_blank" rel="noopener"
>&lt;code>Detection and Reaction to threats in Kubernetes with Falco and a FaaS (Ekoparty 2021)&lt;/code>&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="2020">2020
&lt;/h3>&lt;ul>
&lt;li>&amp;#x1f1eb;&amp;#x1f1f7; &lt;a class="link" href="https://medium.com/electro-monkeys/46-la-s%C3%A9curit%C3%A9-dans-tous-ses-%C3%A9tats-d%C3%A9tection-de-comportements-ind%C3%A9sirables-gr%C3%A2ce-%C3%A0-falco-avec-5c3834ad28b8" target="_blank" rel="noopener"
>&lt;code>La sÃ©curitÃ© dans tous ses Ã©tats â€” dÃ©tection de comportements indÃ©sirables grÃ¢ce Ã  Falco (Electro Monkeys)&lt;/code>&lt;/a>&lt;/li>
&lt;/ul></description></item></channel></rss>